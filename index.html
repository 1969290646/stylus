<a href="http://github.com/learnboost/switch"><img alt="Fork me on GitHub" id="ribbon" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a><html>
	<head>
		<title>Switch</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<style>body {
    margin: 0;
    padding: 0;
    font: 14px/1.5 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
    color: #252519;
}
a {
    color: #252519;
}
a:hover {
    text-decoration: underline;
    color: #19469D;
}
p {
    margin: 12px 0;
}
h1, h2, h3 {
    margin: 0;
    padding: 0;
}
table#source {
    width: 100%;
    border-collapse: collapse;
}
table#source td:first-child {
    padding: 30px 40px 30px 40px;
    vertical-align: top;
}
table#source td:first-child,
table#source td:first-child pre {
    width: 450px;
}
table#source td:last-child {
    padding: 30px 0 30px 40px;
    border-left: 1px solid #E5E5EE;
    background: #F5F5FF;
}
table#source tr {
    border-bottom: 1px solid #E5E5EE;
}
table#source tr.filename {
    padding-top: 40px;
    border-top: 1px solid #E5E5EE;
}
table#source tr.filename td:first-child {
    text-transform: capitalize;
}
table#source tr.filename td:last-child {
    font-size: 12px;
}
table#source tr.filename h2 {
    margin: 0;
    padding: 0;
    cursor: pointer;
}
table#source tr.code h1,
table#source tr.code h2,
table#source tr.code h3 {
    margin-top: 30px;
    font-family: "Lucida Grande", "Helvetica Nueue", Arial, sans-serif;
    font-size: 18px;
}
table#source tr.code h2 {
    font-size: 16px;
}
table#source tr.code h3 {
    font-size: 14px;
}
table#source tr.code ul {
    margin: 15px 0 15px 35px;
    padding: 0;
}
table#source tr.code ul li {
    margin: 0;
    padding: 1px 0;
}
table#source tr.code ul li p {
    margin: 0;
    padding: 0;
}
table#source tr.code td:first-child pre {
    padding: 20px;
}
#ribbon {
    position: fixed;
    top: 0;
    right: 0;
}
code .string { color: #219161; }
code .regexp { color: #219161; }
code .keyword { color: #954121; }
code .number { color: #19469D; }
code .comment { color: #bbb; }
code .this { color: #19469D; }</style>
		<script>
			$(function(){
				$('tr.code').hide();
				$('tr.filename').toggle(function(){
					$(this).nextUntil('.filename').fadeIn();
				}, function(){
					$(this).nextUntil('.filename').fadeOut();
				});
			});
		</script>
	</head>
	<body>
<table id="source"><tbody><tr><td><h1>Switch</h1><p>Expressive CSS language for nodejs</p></td><td></td></tr><tr class="filename"><td><h2 id="lib/css.js"><a href="#">css</a></h2></td><td>lib/css.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Renderer</span> = <span class="variable">require</span>(<span class="string">'./renderer'</span>)
  , <span class="variable">inspect</span> = <span class="variable">require</span>(<span class="string">'sys'</span>).<span class="variable">inspect</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Library version.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">version</span> = <span class="string">'0.0.1'</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Render the given <code>str</code> with <code>options</code> and callback <code>fn(err, css)</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  str</p></li><li><p><strong>param</strong>: <em>Object | Function</em>  options</p></li><li><p><strong>param</strong>: <em>Function</em>  fn</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">render</span> = <span class="keyword">function</span>(<span class="variable">str</span>, <span class="variable">options</span>, <span class="variable">fn</span>){
  <span class="keyword">if</span> (<span class="string">'function'</span> == <span class="keyword">typeof</span> <span class="variable">options</span>) <span class="variable">fn</span> = <span class="variable">options</span>, <span class="variable">options</span> = {};
  <span class="keyword">var</span> <span class="variable">renderer</span> = <span class="keyword">new</span> <span class="class">Renderer</span>(<span class="variable">str</span>, <span class="variable">options</span>);
  <span class="keyword">try</span> {
    <span class="variable">renderer</span>.<span class="variable">render</span>(<span class="variable">fn</span>);
  } <span class="keyword">catch</span> (<span class="variable">err</span>) {
    <span class="keyword">throw</span> <span class="variable">exports</span>.<span class="variable">formatException</span>(
        <span class="variable">renderer</span>
      , <span class="variable">err</span>
      , <span class="variable">options</span>);
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Format the given <code>err</code> in context to <code>renderer</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Renderer</em>  renderer</p></li><li><p><strong>param</strong>: <em>Error</em>  err</p></li><li><p><strong>param</strong>: <em>Object</em>  options</p></li><li><p><strong>return</strong>: <em>Error</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">formatException</span> = <span class="keyword">function</span>(<span class="variable">renderer</span>, <span class="variable">err</span>, <span class="variable">options</span>){
  <span class="keyword">var</span> <span class="variable">lineno</span> = <span class="variable">renderer</span>.<span class="variable">parser</span>.<span class="variable">lexer</span>.<span class="variable">lineno</span>
    , <span class="variable">contextLineno</span> = <span class="variable">lineno</span> - <span class="number integer">2</span>
    , <span class="variable">contextLines</span> = <span class="variable">options</span>.<span class="variable">context</span> || <span class="number integer">6</span>;

  <span class="keyword">var</span> <span class="variable">src</span> = <span class="variable">renderer</span>.<span class="variable">str</span>.<span class="variable">split</span>(<span class="string">'\n'</span>)
    .<span class="variable">slice</span>(<span class="variable">contextLineno</span>, <span class="variable">contextLineno</span> + <span class="variable">contextLines</span>)
    .<span class="variable">map</span>(<span class="keyword">function</span>(<span class="variable">line</span>){ <span class="keyword">return</span> <span class="string">'  '</span> + ++<span class="variable">contextLineno</span> + <span class="string">': '</span> + <span class="variable">inspect</span>(<span class="variable">line</span>); })
    .<span class="variable">join</span>(<span class="string">'\n'</span>);

  <span class="variable">err</span>.<span class="variable">message</span> = <span class="variable">renderer</span>.<span class="variable">filename</span>
    + <span class="string">':'</span> + <span class="variable">lineno</span>
    + <span class="string">'\n'</span> + <span class="variable">src</span>
    + <span class="string">'\n\n'</span> + <span class="variable">err</span>.<span class="variable">message</span>;

  <span class="keyword">return</span> <span class="variable">err</span>;
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/lexer.js"><a href="#">lexer</a></h2></td><td>lib/lexer.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Token</span> = <span class="variable">require</span>(<span class="string">'./token'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'./nodes'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Operator aliases.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">alias</span> = {
    <span class="variable">not</span>: <span class="string">'!'</span>
  , <span class="variable">and</span>: <span class="string">'&amp;&amp;'</span>
  , <span class="variable">or</span>: <span class="string">'||'</span>
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Numeric strings used for exceptions.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">numberString</span> = [, <span class="string">'one'</span>, <span class="string">'two'</span>];</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Units.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">units</span> = [
    <span class="string">'em'</span>
  , <span class="string">'ex'</span>
  , <span class="string">'px'</span>
  , <span class="string">'cm'</span>
  , <span class="string">'mm'</span>
  , <span class="string">'in'</span>
  , <span class="string">'pt'</span>
  , <span class="string">'pc'</span>
  , <span class="string">'deg'</span>
  , <span class="string">'rad'</span>
  , <span class="string">'grad'</span>
  , <span class="string">'ms'</span>
  , <span class="string">'s'</span>
  , <span class="string">'Hz'</span>
  , <span class="string">'kHz'</span>
  , <span class="string">'%'</span>].<span class="variable">join</span>(<span class="string">'|'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Unit RegExp.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">unit</span> = <span class="keyword">new</span> <span class="class">RegExp</span>(<span class="string">'^(\\d+\\.\\d+|\\d+|\\.\\d+)('</span> + <span class="variable">units</span> + <span class="string">')? *'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Color names.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">colors</span> = {
    <span class="variable">aliceblue</span>: [<span class="number integer">240</span>, <span class="number integer">248</span>, <span class="number integer">255</span>]
  , <span class="variable">antiquewhite</span>: [<span class="number integer">250</span>, <span class="number integer">235</span>, <span class="number integer">215</span>]
  , <span class="variable">aqua</span>: [<span class="number integer">0</span>, <span class="number integer">255</span>, <span class="number integer">255</span>]
  , <span class="variable">aquamarine</span>: [<span class="number integer">127</span>, <span class="number integer">255</span>, <span class="number integer">212</span>]
  , <span class="variable">azure</span>: [<span class="number integer">240</span>, <span class="number integer">255</span>, <span class="number integer">255</span>]
  , <span class="variable">beige</span>: [<span class="number integer">245</span>, <span class="number integer">245</span>, <span class="number integer">220</span>]
  , <span class="variable">bisque</span>: [<span class="number integer">255</span>, <span class="number integer">228</span>, <span class="number integer">196</span>]
  , <span class="variable">black</span>: [<span class="number integer">0</span>, <span class="number integer">0</span>, <span class="number integer">0</span>]
  , <span class="variable">blanchedalmond</span>: [<span class="number integer">255</span>, <span class="number integer">235</span>, <span class="number integer">205</span>]
  , <span class="variable">blue</span>: [<span class="number integer">0</span>, <span class="number integer">0</span>, <span class="number integer">255</span>]
  , <span class="variable">blueviolet</span>: [<span class="number integer">138</span>, <span class="number integer">43</span>, <span class="number integer">226</span>]
  , <span class="variable">brown</span>: [<span class="number integer">165</span>, <span class="number integer">42</span>, <span class="number integer">42</span>]
  , <span class="variable">burlywood</span>: [<span class="number integer">222</span>, <span class="number integer">184</span>, <span class="number integer">135</span>]
  , <span class="variable">cadetblue</span>: [<span class="number integer">95</span>, <span class="number integer">158</span>, <span class="number integer">160</span>]
  , <span class="variable">chartreuse</span>: [<span class="number integer">127</span>, <span class="number integer">255</span>, <span class="number integer">0</span>]
  , <span class="variable">chocolate</span>: [<span class="number integer">210</span>, <span class="number integer">105</span>, <span class="number integer">30</span>]
  , <span class="variable">coral</span>: [<span class="number integer">255</span>, <span class="number integer">127</span>, <span class="number integer">80</span>]
  , <span class="variable">cornflowerblue</span>: [<span class="number integer">100</span>, <span class="number integer">149</span>, <span class="number integer">237</span>]
  , <span class="variable">cornsilk</span>: [<span class="number integer">255</span>, <span class="number integer">248</span>, <span class="number integer">220</span>]
  , <span class="variable">crimson</span>: [<span class="number integer">220</span>, <span class="number integer">20</span>, <span class="number integer">60</span>]
  , <span class="variable">cyan</span>: [<span class="number integer">0</span>, <span class="number integer">255</span>, <span class="number integer">255</span>]
  , <span class="variable">darkblue</span>: [<span class="number integer">0</span>, <span class="number integer">0</span>, <span class="number integer">139</span>]
  , <span class="variable">darkcyan</span>: [<span class="number integer">0</span>, <span class="number integer">139</span>, <span class="number integer">139</span>]
  , <span class="variable">darkgoldenrod</span>: [<span class="number integer">184</span>, <span class="number integer">132</span>, <span class="number integer">11</span>]
  , <span class="variable">darkgray</span>: [<span class="number integer">169</span>, <span class="number integer">169</span>, <span class="number integer">169</span>]
  , <span class="variable">darkgreen</span>: [<span class="number integer">0</span>, <span class="number integer">100</span>, <span class="number integer">0</span>]
  , <span class="variable">darkgrey</span>: [<span class="number integer">169</span>, <span class="number integer">169</span>, <span class="number integer">169</span>]
  , <span class="variable">darkkhaki</span>: [<span class="number integer">189</span>, <span class="number integer">183</span>, <span class="number integer">107</span>]
  , <span class="variable">darkmagenta</span>: [<span class="number integer">139</span>, <span class="number integer">0</span>, <span class="number integer">139</span>]
  , <span class="variable">darkolivegreen</span>: [<span class="number integer">85</span>, <span class="number integer">107</span>, <span class="number integer">47</span>]
  , <span class="variable">darkorange</span>: [<span class="number integer">255</span>, <span class="number integer">140</span>, <span class="number integer">0</span>]
  , <span class="variable">darkorchid</span>: [<span class="number integer">153</span>, <span class="number integer">50</span>, <span class="number integer">204</span>]
  , <span class="variable">darkred</span>: [<span class="number integer">139</span>, <span class="number integer">0</span>, <span class="number integer">0</span>]
  , <span class="variable">darksalmon</span>: [<span class="number integer">233</span>, <span class="number integer">150</span>, <span class="number integer">122</span>]
  , <span class="variable">darkseagreen</span>: [<span class="number integer">143</span>, <span class="number integer">188</span>, <span class="number integer">143</span>]
  , <span class="variable">darkslateblue</span>: [<span class="number integer">72</span>, <span class="number integer">61</span>, <span class="number integer">139</span>]
  , <span class="variable">darkslategray</span>: [<span class="number integer">47</span>, <span class="number integer">79</span>, <span class="number integer">79</span>]
  , <span class="variable">darkslategrey</span>: [<span class="number integer">47</span>, <span class="number integer">79</span>, <span class="number integer">79</span>]
  , <span class="variable">darkturquoise</span>: [<span class="number integer">0</span>, <span class="number integer">206</span>, <span class="number integer">209</span>]
  , <span class="variable">darkviolet</span>: [<span class="number integer">148</span>, <span class="number integer">0</span>, <span class="number integer">211</span>]
  , <span class="variable">deeppink</span>: [<span class="number integer">255</span>, <span class="number integer">20</span>, <span class="number integer">147</span>]
  , <span class="variable">deepskyblue</span>: [<span class="number integer">0</span>, <span class="number integer">191</span>, <span class="number integer">255</span>]
  , <span class="variable">dimgray</span>: [<span class="number integer">105</span>, <span class="number integer">105</span>, <span class="number integer">105</span>]
  , <span class="variable">dimgrey</span>: [<span class="number integer">105</span>, <span class="number integer">105</span>, <span class="number integer">105</span>]
  , <span class="variable">dodgerblue</span>: [<span class="number integer">30</span>, <span class="number integer">144</span>, <span class="number integer">255</span>]
  , <span class="variable">firebrick</span>: [<span class="number integer">178</span>, <span class="number integer">34</span>, <span class="number integer">34</span>]
  , <span class="variable">floralwhite</span>: [<span class="number integer">255</span>, <span class="number integer">255</span>, <span class="number integer">240</span>]
  , <span class="variable">forestgreen</span>: [<span class="number integer">34</span>, <span class="number integer">139</span>, <span class="number integer">34</span>]
  , <span class="variable">fuchsia</span>: [<span class="number integer">255</span>, <span class="number integer">0</span>, <span class="number integer">255</span>]
  , <span class="variable">gainsboro</span>: [<span class="number integer">220</span>, <span class="number integer">220</span>, <span class="number integer">220</span>]
  , <span class="variable">ghostwhite</span>: [<span class="number integer">248</span>, <span class="number integer">248</span>, <span class="number integer">255</span>]
  , <span class="variable">gold</span>: [<span class="number integer">255</span>, <span class="number integer">215</span>, <span class="number integer">0</span>]
  , <span class="variable">goldenrod</span>: [<span class="number integer">218</span>, <span class="number integer">165</span>, <span class="number integer">32</span>]
  , <span class="variable">gray</span>: [<span class="number integer">128</span>, <span class="number integer">128</span>, <span class="number integer">128</span>]
  , <span class="variable">green</span>: [<span class="number integer">0</span>, <span class="number integer">128</span>, <span class="number integer">0</span>]
  , <span class="variable">greenyellow</span>: [<span class="number integer">173</span>, <span class="number integer">255</span>, <span class="number integer">47</span>]
  , <span class="variable">grey</span>: [<span class="number integer">128</span>, <span class="number integer">128</span>, <span class="number integer">128</span>]
  , <span class="variable">honeydew</span>: [<span class="number integer">240</span>, <span class="number integer">255</span>, <span class="number integer">240</span>]
  , <span class="variable">hotpink</span>: [<span class="number integer">255</span>, <span class="number integer">105</span>, <span class="number integer">180</span>]
  , <span class="variable">indianred</span>: [<span class="number integer">205</span>, <span class="number integer">92</span>, <span class="number integer">92</span>]
  , <span class="variable">indigo</span>: [<span class="number integer">75</span>, <span class="number integer">0</span>, <span class="number integer">130</span>]
  , <span class="variable">ivory</span>: [<span class="number integer">255</span>, <span class="number integer">255</span>, <span class="number integer">240</span>]
  , <span class="variable">khaki</span>: [<span class="number integer">240</span>, <span class="number integer">230</span>, <span class="number integer">140</span>]
  , <span class="variable">lavender</span>: [<span class="number integer">230</span>, <span class="number integer">230</span>, <span class="number integer">250</span>]
  , <span class="variable">lavenderblush</span>: [<span class="number integer">255</span>, <span class="number integer">240</span>, <span class="number integer">245</span>]
  , <span class="variable">lawngreen</span>: [<span class="number integer">124</span>, <span class="number integer">252</span>, <span class="number integer">0</span>]
  , <span class="variable">lemonchiffon</span>: [<span class="number integer">255</span>, <span class="number integer">250</span>, <span class="number integer">205</span>]
  , <span class="variable">lightblue</span>: [<span class="number integer">173</span>, <span class="number integer">216</span>, <span class="number integer">230</span>]
  , <span class="variable">lightcoral</span>: [<span class="number integer">240</span>, <span class="number integer">128</span>, <span class="number integer">128</span>]
  , <span class="variable">lightcyan</span>: [<span class="number integer">224</span>, <span class="number integer">255</span>, <span class="number integer">255</span>]
  , <span class="variable">lightgoldenrodyellow</span>: [<span class="number integer">250</span>, <span class="number integer">250</span>, <span class="number integer">210</span>]
  , <span class="variable">lightgray</span>: [<span class="number integer">211</span>, <span class="number integer">211</span>, <span class="number integer">211</span>]
  , <span class="variable">lightgreen</span>: [<span class="number integer">144</span>, <span class="number integer">238</span>, <span class="number integer">144</span>]
  , <span class="variable">lightgrey</span>: [<span class="number integer">211</span>, <span class="number integer">211</span>, <span class="number integer">211</span>]
  , <span class="variable">lightpink</span>: [<span class="number integer">255</span>, <span class="number integer">182</span>, <span class="number integer">193</span>]
  , <span class="variable">lightsalmon</span>: [<span class="number integer">255</span>, <span class="number integer">160</span>, <span class="number integer">122</span>]
  , <span class="variable">lightseagreen</span>: [<span class="number integer">32</span>, <span class="number integer">178</span>, <span class="number integer">170</span>]
  , <span class="variable">lightskyblue</span>: [<span class="number integer">135</span>, <span class="number integer">206</span>, <span class="number integer">250</span>]
  , <span class="variable">lightslategray</span>: [<span class="number integer">119</span>, <span class="number integer">136</span>, <span class="number integer">153</span>]
  , <span class="variable">lightslategrey</span>: [<span class="number integer">119</span>, <span class="number integer">136</span>, <span class="number integer">153</span>]
  , <span class="variable">lightsteelblue</span>: [<span class="number integer">176</span>, <span class="number integer">196</span>, <span class="number integer">222</span>]
  , <span class="variable">lightyellow</span>: [<span class="number integer">255</span>, <span class="number integer">255</span>, <span class="number integer">224</span>]
  , <span class="variable">lime</span>: [<span class="number integer">0</span>, <span class="number integer">255</span>, <span class="number integer">0</span>]
  , <span class="variable">limegreen</span>: [<span class="number integer">50</span>, <span class="number integer">205</span>, <span class="number integer">50</span>]
  , <span class="variable">linen</span>: [<span class="number integer">250</span>, <span class="number integer">240</span>, <span class="number integer">230</span>]
  , <span class="variable">magenta</span>: [<span class="number integer">255</span>, <span class="number integer">0</span>, <span class="number integer">255</span>]
  , <span class="variable">maroon</span>: [<span class="number integer">128</span>, <span class="number integer">0</span>, <span class="number integer">0</span>]
  , <span class="variable">mediumaquamarine</span>: [<span class="number integer">102</span>, <span class="number integer">205</span>, <span class="number integer">170</span>]
  , <span class="variable">mediumblue</span>: [<span class="number integer">0</span>, <span class="number integer">0</span>, <span class="number integer">205</span>]
  , <span class="variable">mediumorchid</span>: [<span class="number integer">186</span>, <span class="number integer">85</span>, <span class="number integer">211</span>]
  , <span class="variable">mediumpurple</span>: [<span class="number integer">147</span>, <span class="number integer">112</span>, <span class="number integer">219</span>]
  , <span class="variable">mediumseagreen</span>: [<span class="number integer">60</span>, <span class="number integer">179</span>, <span class="number integer">113</span>]
  , <span class="variable">mediumslateblue</span>: [<span class="number integer">123</span>, <span class="number integer">104</span>, <span class="number integer">238</span>]
  , <span class="variable">mediumspringgreen</span>: [<span class="number integer">0</span>, <span class="number integer">250</span>, <span class="number integer">154</span>]
  , <span class="variable">mediumturquoise</span>: [<span class="number integer">72</span>, <span class="number integer">209</span>, <span class="number integer">204</span>]
  , <span class="variable">mediumvioletred</span>: [<span class="number integer">199</span>, <span class="number integer">21</span>, <span class="number integer">133</span>]
  , <span class="variable">midnightblue</span>: [<span class="number integer">25</span>, <span class="number integer">25</span>, <span class="number integer">112</span>]
  , <span class="variable">mintcream</span>: [<span class="number integer">245</span>, <span class="number integer">255</span>, <span class="number integer">250</span>]
  , <span class="variable">mistyrose</span>: [<span class="number integer">255</span>, <span class="number integer">228</span>, <span class="number integer">225</span>]
  , <span class="variable">moccasin</span>: [<span class="number integer">255</span>, <span class="number integer">228</span>, <span class="number integer">181</span>]
  , <span class="variable">navajowhite</span>: [<span class="number integer">255</span>, <span class="number integer">222</span>, <span class="number integer">173</span>]
  , <span class="variable">navy</span>: [<span class="number integer">0</span>, <span class="number integer">0</span>, <span class="number integer">128</span>]
  , <span class="variable">oldlace</span>: [<span class="number integer">253</span>, <span class="number integer">245</span>, <span class="number integer">230</span>]
  , <span class="variable">olive</span>: [<span class="number integer">128</span>, <span class="number integer">128</span>, <span class="number integer">0</span>]
  , <span class="variable">olivedrab</span>: [<span class="number integer">107</span>, <span class="number integer">142</span>, <span class="number integer">35</span>]
  , <span class="variable">orange</span>: [<span class="number integer">255</span>, <span class="number integer">165</span>, <span class="number integer">0</span>]
  , <span class="variable">orangered</span>: [<span class="number integer">255</span>, <span class="number integer">69</span>, <span class="number integer">0</span>]
  , <span class="variable">orchid</span>: [<span class="number integer">218</span>, <span class="number integer">112</span>, <span class="number integer">214</span>]
  , <span class="variable">palegoldenrod</span>: [<span class="number integer">238</span>, <span class="number integer">232</span>, <span class="number integer">170</span>]
  , <span class="variable">palegreen</span>: [<span class="number integer">152</span>, <span class="number integer">251</span>, <span class="number integer">152</span>]
  , <span class="variable">paleturquoise</span>: [<span class="number integer">175</span>, <span class="number integer">238</span>, <span class="number integer">238</span>]
  , <span class="variable">palevioletred</span>: [<span class="number integer">219</span>, <span class="number integer">112</span>, <span class="number integer">147</span>]
  , <span class="variable">papayawhip</span>: [<span class="number integer">255</span>, <span class="number integer">239</span>, <span class="number integer">213</span>]
  , <span class="variable">peachpuff</span>: [<span class="number integer">255</span>, <span class="number integer">218</span>, <span class="number integer">185</span>]
  , <span class="variable">peru</span>: [<span class="number integer">205</span>, <span class="number integer">133</span>, <span class="number integer">63</span>]
  , <span class="variable">pink</span>: [<span class="number integer">255</span>, <span class="number integer">192</span>, <span class="number integer">203</span>]
  , <span class="variable">plum</span>: [<span class="number integer">221</span>, <span class="number integer">160</span>, <span class="number integer">203</span>]
  , <span class="variable">powderblue</span>: [<span class="number integer">176</span>, <span class="number integer">224</span>, <span class="number integer">230</span>]
  , <span class="variable">purple</span>: [<span class="number integer">128</span>, <span class="number integer">0</span>, <span class="number integer">128</span>]
  , <span class="variable">red</span>: [<span class="number integer">255</span>, <span class="number integer">0</span>, <span class="number integer">0</span>]
  , <span class="variable">rosybrown</span>: [<span class="number integer">188</span>, <span class="number integer">143</span>, <span class="number integer">143</span>]
  , <span class="variable">royalblue</span>: [<span class="number integer">65</span>, <span class="number integer">105</span>, <span class="number integer">225</span>]
  , <span class="variable">saddlebrown</span>: [<span class="number integer">139</span>, <span class="number integer">69</span>, <span class="number integer">19</span>]
  , <span class="variable">salmon</span>: [<span class="number integer">250</span>, <span class="number integer">128</span>, <span class="number integer">114</span>]
  , <span class="variable">sandybrown</span>: [<span class="number integer">244</span>, <span class="number integer">164</span>, <span class="number integer">96</span>]
  , <span class="variable">seagreen</span>: [<span class="number integer">46</span>, <span class="number integer">139</span>, <span class="number integer">87</span>]
  , <span class="variable">seashell</span>: [<span class="number integer">255</span>, <span class="number integer">245</span>, <span class="number integer">238</span>]
  , <span class="variable">sienna</span>: [<span class="number integer">160</span>, <span class="number integer">82</span>, <span class="number integer">45</span>]
  , <span class="variable">silver</span>: [<span class="number integer">192</span>, <span class="number integer">192</span>, <span class="number integer">192</span>]
  , <span class="variable">skyblue</span>: [<span class="number integer">135</span>, <span class="number integer">206</span>, <span class="number integer">235</span>]
  , <span class="variable">slateblue</span>: [<span class="number integer">106</span>, <span class="number integer">90</span>, <span class="number integer">205</span>]
  , <span class="variable">slategray</span>: [<span class="number integer">119</span>, <span class="number integer">128</span>, <span class="number integer">144</span>]
  , <span class="variable">slategrey</span>: [<span class="number integer">119</span>, <span class="number integer">128</span>, <span class="number integer">144</span>]
  , <span class="variable">snow</span>: [<span class="number integer">255</span>, <span class="number integer">255</span>, <span class="number integer">250</span>]
  , <span class="variable">springgreen</span>: [<span class="number integer">0</span>, <span class="number integer">255</span>, <span class="number integer">127</span>]
  , <span class="variable">steelblue</span>: [<span class="number integer">70</span>, <span class="number integer">130</span>, <span class="number integer">180</span>]
  , <span class="variable">tan</span>: [<span class="number integer">210</span>, <span class="number integer">180</span>, <span class="number integer">140</span>]
  , <span class="variable">teal</span>: [<span class="number integer">0</span>, <span class="number integer">128</span>, <span class="number integer">128</span>]
  , <span class="variable">tle</span>: [<span class="number integer">216</span>, <span class="number integer">191</span>, <span class="number integer">216</span>]
  , <span class="variable">tomato</span>: [<span class="number integer">255</span>, <span class="number integer">99</span>, <span class="number integer">71</span>]
  , <span class="variable">turquoise</span>: [<span class="number integer">64</span>, <span class="number integer">224</span>, <span class="number integer">208</span>]
  , <span class="variable">violet</span>: [<span class="number integer">238</span>, <span class="number integer">130</span>, <span class="number integer">238</span>]
  , <span class="variable">wheat</span>: [<span class="number integer">245</span>, <span class="number integer">222</span>, <span class="number integer">179</span>]
  , <span class="variable">white</span>: [<span class="number integer">255</span>, <span class="number integer">255</span>, <span class="number integer">255</span>]
  , <span class="variable">whitesmoke</span>: [<span class="number integer">245</span>, <span class="number integer">245</span>, <span class="number integer">245</span>]
  , <span class="variable">yellow</span>: [<span class="number integer">255</span>, <span class="number integer">255</span>, <span class="number integer">0</span>]
  , <span class="variable">yellowgreen</span>: [<span class="number integer">154</span>, <span class="number integer">205</span>, <span class="number integer">5</span>]
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Color RegExp.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">color</span> = <span class="keyword">new</span> <span class="class">RegExp</span>(<span class="string">'^('</span> + <span class="class">Object</span>.<span class="variable">keys</span>(<span class="variable">colors</span>).<span class="variable">join</span>(<span class="string">'|'</span>) + <span class="string">')(\\()? *'</span>)</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Lexer</code> with the given <code>str</code> and <code>options</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  str</p></li><li><p><strong>param</strong>: <em>Object</em>  options</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Lexer</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Lexer</span>(<span class="variable">str</span>, <span class="variable">options</span>) {
  <span class="variable">options</span> = <span class="variable">options</span> || {};
  <span class="this">this</span>.<span class="variable">str</span> = <span class="variable">str</span>.<span class="variable">replace</span>(<span class="regexp">/\r\n?/g</span>, <span class="string">'\n'</span>).<span class="variable">replace</span>(<span class="regexp">/\t/g</span>, <span class="string">'  '</span>);
  <span class="this">this</span>.<span class="variable">filename</span> = <span class="variable">options</span>.<span class="variable">filename</span> || <span class="string">'css'</span>;
  <span class="this">this</span>.<span class="variable">stash</span> = [];
  <span class="this">this</span>.<span class="variable">prevIndents</span> = <span class="number integer">0</span>;
  <span class="this">this</span>.<span class="variable">lineno</span> = <span class="number integer">1</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Lexer prototype.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Lexer</span>.<span class="variable">prototype</span> = {</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Custom inspect.
   </p>
</td>
<td class="code">
<pre><code><span class="variable">inspect</span>: <span class="keyword">function</span>(){
    <span class="keyword">var</span> <span class="variable">tok</span>
      , <span class="variable">tmp</span> = <span class="this">this</span>.<span class="variable">str</span>
      , <span class="variable">buf</span> = [];
    <span class="keyword">while</span> (<span class="string">'eos'</span> != (<span class="variable">tok</span> = <span class="this">this</span>.<span class="variable">next</span>).<span class="variable">type</span>) {
      <span class="variable">buf</span>.<span class="variable">push</span>(<span class="variable">tok</span>.<span class="variable">inspect</span>());
    }
    <span class="this">this</span>.<span class="variable">str</span> = <span class="variable">tmp</span>;
    <span class="this">this</span>.<span class="variable">prevIndents</span> = <span class="number integer">0</span>;
    <span class="keyword">return</span> <span class="variable">buf</span>.<span class="variable">concat</span>(<span class="variable">tok</span>.<span class="variable">inspect</span>()).<span class="variable">join</span>(<span class="string">'\n'</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Lookahead <code>n</code> tokens.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Number</em>  n</p></li><li><p><strong>return</strong>: <em>Object</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">lookahead</span>: <span class="keyword">function</span>(<span class="variable">n</span>){
    <span class="keyword">var</span> <span class="variable">fetch</span> = <span class="variable">n</span> - <span class="this">this</span>.<span class="variable">stash</span>.<span class="variable">length</span>;
    <span class="keyword">while</span> (<span class="variable">fetch</span>-- &<span class="variable">gt</span>; <span class="number integer">0</span>) <span class="this">this</span>.<span class="variable">stash</span>.<span class="variable">push</span>(<span class="this">this</span>.<span class="variable">advance</span>);
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">stash</span>[--<span class="variable">n</span>];
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Fetch next token including those stashed by peek.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">next</span>() {
    <span class="keyword">var</span> <span class="variable">tok</span> = <span class="this">this</span>.<span class="variable">stashed</span> || <span class="this">this</span>.<span class="variable">advance</span>;
    <span class="keyword">if</span> (~[<span class="string">'newline'</span>, <span class="string">'selector'</span>, <span class="string">'indent'</span>].<span class="variable">indexOf</span>(<span class="variable">tok</span>.<span class="variable">type</span>)) {
      <span class="variable">tok</span>.<span class="variable">lineno</span> = <span class="this">this</span>.<span class="variable">lineno</span>++;
    }
    <span class="keyword">return</span> <span class="variable">tok</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Fetch next token.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">advance</span>() {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">eos</span>
      || <span class="this">this</span>.<span class="variable">comment</span>
      || <span class="this">this</span>.<span class="variable">newline</span>
      || <span class="this">this</span>.<span class="variable">comma</span>
      || <span class="this">this</span>.<span class="variable">paren</span>
      || <span class="this">this</span>.<span class="variable">color</span>
      || <span class="this">this</span>.<span class="variable">variable</span>
      || <span class="this">this</span>.<span class="variable">string</span>
      || <span class="this">this</span>.<span class="variable">unit</span>
      || <span class="this">this</span>.<span class="variable">property</span>
      || <span class="this">this</span>.<span class="variable">op</span>
      || <span class="this">this</span>.<span class="variable">boolean</span>
      || <span class="this">this</span>.<span class="variable">ident</span>
      || <span class="this">this</span>.<span class="variable">selector</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Lookahead a single token.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">peek</span>() {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">lookahead</span>(<span class="number integer">1</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the next possibly stashed token.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">stashed</span>() {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">stash</span>.<span class="variable">shift</span>();
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Check current property state.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">isProperty</span>() {
    <span class="keyword">return</span> <span class="number integer">1</span> == <span class="this">this</span>.<span class="variable">prevIndents</span> % <span class="number integer">2</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>EOS | trailing outdents.
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">eos</span>() {
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">str</span>.<span class="variable">length</span>) <span class="keyword">return</span>;
    <span class="keyword">return</span> <span class="number integer">0</span> == --<span class="this">this</span>.<span class="variable">prevIndents</span>
      ? <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'outdent'</span>)
      : <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'eos'</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>',' ' '*
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">comma</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^, */</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">','</span>);
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>'(' | ')' ' '*
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">paren</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^([()]) */</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="keyword">var</span> <span class="variable">paren</span> = <span class="variable">captures</span>[<span class="number integer">1</span>];
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">if</span> (<span class="string">')'</span> == <span class="variable">paren</span>) <span class="this">this</span>.<span class="variable">isURL</span> = <span class="variable">false</span>;
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="variable">paren</span>);
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>  '+'
| '-'
| '*'
| '/'
| '%'
| '**'
| '!'
| 'not'
| 'and'
| 'or'
| '&amp;&amp;'
| '||'
| '&gt;'
| '&gt;='
| '&lt;'
| '&lt;='
| '='
| '=='
| '!'
| '~'
| '?'
| ':'
| 'is a'
| 'is defined'
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">op</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^(not|and|or|&amp;&amp;|\|\||is a|is defined|[&lt;&gt;=]=|\*\*|[-=?:!~+&lt;&gt;*\/</span>%]) */.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="keyword">var</span> <span class="variable">op</span> = <span class="variable">captures</span>[<span class="number integer">1</span>];
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="variable">alias</span>[<span class="variable">op</span>] || <span class="variable">op</span>);
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>'//' *
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">comment</span>() {
    <span class="comment">// Single line</span>
    <span class="keyword">if</span> (<span class="string">'/'</span> == <span class="this">this</span>.<span class="variable">str</span>[<span class="number integer">0</span>] &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="string">'/'</span> == <span class="this">this</span>.<span class="variable">str</span>[<span class="number integer">1</span>]) {
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="this">this</span>.<span class="variable">str</span>.<span class="variable">indexOf</span>(<span class="string">'\n'</span>));
      <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">advance</span>;
    }

    <span class="comment">// Multi-line</span>
    <span class="keyword">if</span> (<span class="string">'/'</span> == <span class="this">this</span>.<span class="variable">str</span>[<span class="number integer">0</span>] &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="string">'*'</span> == <span class="this">this</span>.<span class="variable">str</span>[<span class="number integer">1</span>]) {
      <span class="keyword">var</span> <span class="variable">end</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">indexOf</span>(<span class="string">'*/'</span>);
      <span class="keyword">if</span> (-<span class="number integer">1</span> == <span class="variable">end</span>) <span class="variable">end</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">length</span>;
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">end</span> + <span class="number integer">2</span>);
      <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">advance</span>;
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>'true' | 'false'
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">boolean</span>() {
    <span class="keyword">if</span> (<span class="number integer">0</span> == <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">indexOf</span>(<span class="string">'true'</span>)) {
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="number integer">4</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'boolean'</span>, <span class="variable">nodes</span>.<span class="variable">true</span>);
    }

    <span class="keyword">if</span> (<span class="number integer">0</span> == <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">indexOf</span>(<span class="string">'false'</span>)) {
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="number integer">5</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'boolean'</span>, <span class="variable">nodes</span>.<span class="variable">false</span>);
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>ident
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">ident</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">isSelector</span>) <span class="keyword">return</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^([A-Za-z-]+) */</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="keyword">var</span> <span class="variable">val</span> = <span class="variable">captures</span>[<span class="number integer">1</span>];
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'ident'</span>, <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Ident</span>(<span class="variable">val</span>));
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>'@' [-\w]+ | [-\w]{2,} '('
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">variable</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^(?:@([-\w]+)|(?:([-\w]{2,}))\() */</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="keyword">var</span> <span class="variable">fn</span> = <span class="variable">captures</span>[<span class="number integer">2</span>]
        , <span class="variable">name</span> = <span class="variable">captures</span>[<span class="number integer">1</span>] || <span class="variable">captures</span>[<span class="number integer">2</span>];
      <span class="this">this</span>.<span class="variable">isURL</span> = <span class="string">'url'</span> == <span class="variable">name</span>;
      <span class="this">this</span>.<span class="variable">isVariable</span> = <span class="variable">true</span>;
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">fn</span>
        ? <span class="variable">name</span>.<span class="variable">length</span>
        : <span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'variable'</span>, <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Variable</span>(<span class="variable">name</span>));
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>'\n' ' '+
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">newline</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^\n( *)/</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">var</span> <span class="variable">tok</span>
        , <span class="variable">spaces</span> = <span class="variable">captures</span>[<span class="number integer">1</span>].<span class="variable">length</span>
        , <span class="variable">indents</span> = <span class="variable">spaces</span> / <span class="number integer">2</span>;

      <span class="comment">// Reset state</span>
      <span class="this">this</span>.<span class="variable">isVariable</span> = <span class="variable">false</span>;

      <span class="comment">// To few spaces</span>
      <span class="keyword">if</span> (<span class="number integer">0</span> != <span class="variable">spaces</span> % <span class="number integer">2</span>) {
        <span class="keyword">var</span> <span class="variable">str</span> = <span class="number integer">1</span> == <span class="variable">spaces</span> ? <span class="string">'space'</span> : <span class="string">'spaces'</span>
          , <span class="variable">spaces</span> = <span class="variable">numberString</span>[<span class="variable">spaces</span>] || <span class="variable">spaces</span>;
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'Invalid indentation, got '</span> + <span class="variable">spaces</span> + <span class="string">' '</span> + <span class="variable">str</span> + <span class="string">' and expected multiple of two'</span>);
      <span class="comment">// To many spaces</span>
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">indents</span> &<span class="variable">gt</span>; <span class="this">this</span>.<span class="variable">prevIndents</span> + <span class="number integer">1</span>) {
        <span class="keyword">var</span> <span class="variable">str</span> = <span class="number integer">1</span> == <span class="variable">spaces</span> ? <span class="string">'space'</span> : <span class="string">'spaces'</span>
          , <span class="variable">expected</span> = <span class="number integer">2</span> * <span class="this">this</span>.<span class="variable">prevIndents</span> || <span class="number integer">2</span>
          , <span class="variable">expected</span> = <span class="variable">numberString</span>[<span class="variable">expected</span>] || <span class="variable">expected</span>
          , <span class="variable">spaces</span> = <span class="variable">numberString</span>[<span class="variable">spaces</span>] || <span class="variable">spaces</span>;
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'Invalid indentation, got '</span> + <span class="variable">spaces</span> + <span class="string">' '</span> + <span class="variable">str</span> + <span class="string">' and expected '</span> + <span class="variable">expected</span>);
      <span class="comment">// Outdent</span>
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">indents</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">prevIndents</span>) {
        <span class="keyword">var</span> <span class="variable">n</span> = <span class="this">this</span>.<span class="variable">prevIndents</span> - <span class="variable">indents</span>;
        <span class="keyword">while</span> (--<span class="variable">n</span>) <span class="this">this</span>.<span class="variable">stash</span>.<span class="variable">push</span>(<span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'outdent'</span>));
        <span class="this">this</span>.<span class="variable">prevIndents</span> = <span class="variable">indents</span>;
        <span class="variable">tok</span> = <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'outdent'</span>);
      <span class="comment">// Indent</span>
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">indents</span> != <span class="this">this</span>.<span class="variable">prevIndents</span>) {
        <span class="this">this</span>.<span class="variable">prevIndents</span> = <span class="variable">indents</span>;
        <span class="variable">tok</span> = <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'indent'</span>);
      <span class="comment">// Newline</span>
      } <span class="keyword">else</span> {
        <span class="variable">tok</span> = <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'newline'</span>);
      }

      <span class="keyword">return</span> <span class="variable">tok</span>;
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>(digit+ | digit* '.' digit+) unit
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">unit</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="variable">unit</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'unit'</span>, <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">parseFloat</span>(<span class="variable">captures</span>[<span class="number integer">1</span>]), <span class="variable">captures</span>[<span class="number integer">2</span>]));
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>'"' [^"]+ '"' | "'"" [^']+ "'"
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">string</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;

    <span class="comment">// url() special case</span>
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">isURL</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; (<span class="variable">captures</span> = <span class="regexp">/^([^'&quot;][^)]+)/</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>))) {
      <span class="keyword">var</span> <span class="variable">str</span> = <span class="variable">captures</span>[<span class="number integer">1</span>];
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">str</span>.<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'string'</span>, <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">String</span>(<span class="variable">str</span>));
    }

    <span class="comment">// Regular string</span>
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^(&quot;[^&quot;]*&quot;|'[^']*') */</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="keyword">var</span> <span class="variable">str</span> = <span class="variable">captures</span>[<span class="number integer">1</span>];
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'string'</span>, <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">String</span>(<span class="variable">str</span>.<span class="variable">slice</span>(<span class="number integer">1</span>,-<span class="number integer">1</span>)));
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h1>nnnnnn | #nnn | colorString</h1>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">color</span>() {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">hex6</span>
      || <span class="this">this</span>.<span class="variable">hex3</span>
      || <span class="this">this</span>.<span class="variable">colorString</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h1>nnn</h1>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">hex3</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^#([a-f-A-F0-9]{3}) */</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">var</span> <span class="variable">rgb</span> = <span class="variable">captures</span>[<span class="number integer">1</span>]
        , <span class="variable">r</span> = <span class="variable">parseInt</span>(<span class="variable">rgb</span>[<span class="number integer">0</span>] + <span class="variable">rgb</span>[<span class="number integer">0</span>], <span class="number integer">16</span>)
        , <span class="variable">g</span> = <span class="variable">parseInt</span>(<span class="variable">rgb</span>[<span class="number integer">1</span>] + <span class="variable">rgb</span>[<span class="number integer">1</span>], <span class="number integer">16</span>)
        , <span class="variable">b</span> = <span class="variable">parseInt</span>(<span class="variable">rgb</span>[<span class="number integer">2</span>] + <span class="variable">rgb</span>[<span class="number integer">2</span>], <span class="number integer">16</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'color'</span>, <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(<span class="variable">r</span>, <span class="variable">g</span>, <span class="variable">b</span>, <span class="number integer">1</span>)); 
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<h1>nnnnnn</h1>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">hex6</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^#([a-f-A-F0-9]{6}) */</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">var</span> <span class="variable">rgb</span> = <span class="variable">captures</span>[<span class="number integer">1</span>]
        , <span class="variable">r</span> = <span class="variable">parseInt</span>(<span class="variable">rgb</span>.<span class="variable">substr</span>(<span class="number integer">0</span>, <span class="number integer">2</span>), <span class="number integer">16</span>)
        , <span class="variable">g</span> = <span class="variable">parseInt</span>(<span class="variable">rgb</span>.<span class="variable">substr</span>(<span class="number integer">2</span>, <span class="number integer">2</span>), <span class="number integer">16</span>)
        , <span class="variable">b</span> = <span class="variable">parseInt</span>(<span class="variable">rgb</span>.<span class="variable">substr</span>(<span class="number integer">4</span>, <span class="number integer">2</span>), <span class="number integer">16</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'color'</span>, <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(<span class="variable">r</span>, <span class="variable">g</span>, <span class="variable">b</span>, <span class="number integer">1</span>)); 
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Color string.
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">colorString</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="variable">color</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="keyword">var</span> <span class="variable">name</span> = <span class="variable">captures</span>[<span class="number integer">1</span>]
        , <span class="variable">rgb</span> = <span class="variable">colors</span>[<span class="variable">name</span>]
        , <span class="variable">fn</span> = <span class="variable">captures</span>[<span class="number integer">2</span>];
      <span class="keyword">if</span> (<span class="variable">fn</span>) <span class="keyword">return</span>;
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'color'</span>, <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(<span class="variable">rgb</span>[<span class="number integer">0</span>], <span class="variable">rgb</span>[<span class="number integer">1</span>], <span class="variable">rgb</span>[<span class="number integer">2</span>], <span class="number integer">1</span>));
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>[-a-z][-a-z0-9]+
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">property</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (!<span class="this">this</span>.<span class="variable">isProperty</span> || !<span class="this">this</span>.<span class="variable">isSelector</span>) <span class="keyword">return</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^([-a-z][-a-z0-9]+) */</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="keyword">var</span> <span class="variable">prop</span> = <span class="variable">captures</span>[<span class="number integer">1</span>];
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">captures</span>[<span class="number integer">0</span>].<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'property'</span>, <span class="variable">prop</span>);
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>[^\n]+
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">selector</span>() {
    <span class="keyword">var</span> <span class="variable">captures</span>;
    <span class="keyword">if</span> (<span class="variable">captures</span> = <span class="regexp">/^[^\n]+/</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">str</span>)) {
      <span class="keyword">var</span> <span class="variable">selector</span> = <span class="variable">captures</span>[<span class="number integer">0</span>];
      <span class="this">this</span>.<span class="variable">str</span> = <span class="this">this</span>.<span class="variable">str</span>.<span class="variable">substr</span>(<span class="variable">selector</span>.<span class="variable">length</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Token</span>(<span class="string">'selector'</span>, <span class="variable">selector</span>);
    }
  }
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/binop.js"><a href="#">binop</a></h2></td><td>lib/nodes/binop.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>BinOp</code> with <code>op</code>, <code>left</code> and <code>right</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  op</p></li><li><p><strong>param</strong>: <em>Node</em>  left</p></li><li><p><strong>param</strong>: <em>Node</em>  right</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">BinOp</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">BinOp</span>(<span class="variable">op</span>, <span class="variable">left</span>, <span class="variable">right</span>){
  <span class="this">this</span>.<span class="variable">op</span> = <span class="variable">op</span>;
  <span class="this">this</span>.<span class="variable">left</span> = <span class="variable">left</span>;
  <span class="this">this</span>.<span class="variable">right</span> = <span class="variable">right</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">BinOp</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/block.js"><a href="#">block</a></h2></td><td>lib/nodes/block.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Block</code> node with <code>parent</code> Block.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Block</em>  parent</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Block</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Block</span>(<span class="variable">parent</span>){
  <span class="this">this</span>.<span class="variable">nodes</span> = [];
  <span class="this">this</span>.<span class="variable">parent</span> = <span class="variable">parent</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Block</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Push a <code>node</code> to this block.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  node</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Block</span>.<span class="variable">prototype</span>.<span class="variable">push</span> = <span class="keyword">function</span>(<span class="variable">node</span>){
  <span class="this">this</span>.<span class="variable">nodes</span>.<span class="variable">push</span>(<span class="variable">node</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return parent string.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Block</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">parent</span>.<span class="variable">toString</span>();
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/boolean.js"><a href="#">boolean</a></h2></td><td>lib/nodes/boolean.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'./'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Boolean</code> node with the given <code>val</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Boolean</em>  val</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Boolean</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Boolean</span>(<span class="variable">val</span>){
  <span class="keyword">if</span> (<span class="this">this</span> <span class="variable">instanceof</span> <span class="class">Boolean</span>) {
    <span class="this">this</span>.<span class="variable">val</span> = !!<span class="variable">val</span>;
  } <span class="keyword">else</span> {
    <span class="keyword">return</span> <span class="variable">val</span> ? <span class="variable">nodes</span>.<span class="variable">true</span> : <span class="variable">nodes</span>.<span class="variable">false</span>;
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Boolean</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return <code>this</code> node.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Boolean</span>.<span class="variable">prototype</span>.<span class="variable">toBoolean</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Negate the value.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Boolean</span>.<span class="variable">prototype</span>.<span class="variable">negate</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">val</span> ? <span class="variable">nodes</span>.<span class="variable">false</span> : <span class="variable">nodes</span>.<span class="variable">true</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return 'Boolean'.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Boolean</span>.<span class="variable">prototype</span>.<span class="variable">inspect</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="string">'[Boolean '</span> + <span class="this">this</span>.<span class="variable">val</span> + <span class="string">']'</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return 'true' or 'false'.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Boolean</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">val</span> ? <span class="string">'true'</span> : <span class="string">'false'</span>;
};

</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/call.js"><a href="#">call</a></h2></td><td>lib/nodes/call.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Call</code> with <code>name</code> and <code>args</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name</p></li><li><p><strong>param</strong>: <em>Expression</em>  args</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Call</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Call</span>(<span class="variable">name</span>, <span class="variable">args</span>){
  <span class="this">this</span>.<span class="variable">name</span> = <span class="variable">name</span>;
  <span class="this">this</span>.<span class="variable">args</span> = <span class="variable">args</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Call</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return @&lt;name&gt;().</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Call</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="string">'@'</span> + <span class="this">this</span>.<span class="variable">name</span> + <span class="string">'()'</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/color.js"><a href="#">color</a></h2></td><td>lib/nodes/color.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>)
  , <span class="class">HSLA</span> = <span class="variable">require</span>(<span class="string">'./hsla'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Color</code> with the given r,g,b,a component values.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Number</em>  r</p></li><li><p><strong>param</strong>: <em>Number</em>  g</p></li><li><p><strong>param</strong>: <em>Number</em>  b</p></li><li><p><strong>param</strong>: <em>Number</em>  a</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Color</span> = <span class="variable">exports</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Color</span>(<span class="variable">r</span>,<span class="variable">g</span>,<span class="variable">b</span>,<span class="variable">a</span>){
  <span class="this">this</span>.<span class="variable">r</span> = <span class="variable">clamp</span>(<span class="variable">r</span>);
  <span class="this">this</span>.<span class="variable">g</span> = <span class="variable">clamp</span>(<span class="variable">g</span>);
  <span class="this">this</span>.<span class="variable">b</span> = <span class="variable">clamp</span>(<span class="variable">b</span>);
  <span class="this">this</span>.<span class="variable">a</span> = <span class="variable">clampAlpha</span>(<span class="variable">a</span>);
  <span class="this">this</span>.<span class="variable">rgba</span> = <span class="this">this</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Color</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return <code>HSLA</code> representation.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>HSLA</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Color</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'hsl'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="class">HSLA</span>.<span class="variable">fromColor</span>(<span class="this">this</span>);
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return #nnn or rgba(n,n,n,n) string representation of the color.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Color</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">function</span> <span class="variable">pad</span>(<span class="variable">n</span>) { <span class="keyword">return</span> <span class="variable">n</span> &<span class="variable">lt</span>; <span class="number integer">10</span> ? <span class="string">'0'</span> + <span class="variable">n</span> : <span class="variable">n</span>.<span class="variable">toString</span>(<span class="number integer">16</span>); }

  <span class="keyword">if</span> (<span class="number integer">1</span> == <span class="this">this</span>.<span class="variable">a</span>) {
    <span class="keyword">return</span> <span class="string">'#'</span> + <span class="variable">pad</span>(<span class="this">this</span>.<span class="variable">r</span>) + <span class="variable">pad</span>(<span class="this">this</span>.<span class="variable">g</span>) + <span class="variable">pad</span>(<span class="this">this</span>.<span class="variable">b</span>);
  } <span class="keyword">else</span> {
    <span class="keyword">return</span> <span class="string">'rgba('</span>
      + <span class="this">this</span>.<span class="variable">r</span> + <span class="string">','</span>
      + <span class="this">this</span>.<span class="variable">g</span> + <span class="string">','</span>
      + <span class="this">this</span>.<span class="variable">b</span> + <span class="string">','</span>
      + <span class="this">this</span>.<span class="variable">a</span> + <span class="string">')'</span>;
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return a <code>Color</code> from the given <code>hsla</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>HSLA</em>  hsla</p></li><li><p><strong>return</strong>: <em>Color</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">fromHSLA</span> = <span class="keyword">function</span>(<span class="variable">hsla</span>){
  <span class="keyword">var</span> <span class="variable">h</span> = <span class="variable">hsla</span>.<span class="variable">h</span> / <span class="number integer">360</span>
    , <span class="variable">s</span> = <span class="variable">hsla</span>.<span class="variable">s</span> / <span class="number integer">100</span>
    , <span class="variable">l</span> = <span class="variable">hsla</span>.<span class="variable">l</span> / <span class="number integer">100</span>
    , <span class="variable">a</span> = <span class="variable">hsla</span>.<span class="variable">a</span>;

  <span class="keyword">var</span> <span class="variable">m2</span> = <span class="variable">l</span> &<span class="variable">lt</span>;= .<span class="number integer">5</span> ? <span class="variable">l</span> * (<span class="variable">s</span> + <span class="number integer">1</span>) : <span class="variable">l</span> + <span class="variable">s</span> - <span class="variable">l</span> * <span class="variable">s</span>
    , <span class="variable">m1</span> = <span class="variable">l</span> * <span class="number integer">2</span> - <span class="variable">m2</span>;

  <span class="keyword">var</span> <span class="variable">r</span> = <span class="variable">hue</span>(<span class="variable">h</span> + <span class="number integer">1</span>/<span class="number integer">3</span>) * <span class="variable">xff</span>
    , <span class="variable">g</span> = <span class="variable">hue</span>(<span class="variable">h</span>) * <span class="variable">xff</span>
    , <span class="variable">b</span> = <span class="variable">hue</span>(<span class="variable">h</span> - <span class="number integer">1</span>/<span class="number integer">3</span>) * <span class="variable">xff</span>;

  <span class="keyword">function</span> <span class="variable">hue</span>(<span class="variable">h</span>) {
    <span class="keyword">if</span> (<span class="variable">h</span> &<span class="variable">lt</span>; <span class="number integer">0</span>) ++<span class="variable">h</span>;
    <span class="keyword">if</span> (<span class="variable">h</span> &<span class="variable">gt</span>; <span class="number integer">1</span>) --<span class="variable">h</span>;
    <span class="keyword">if</span> (<span class="variable">h</span> * <span class="number integer">6</span> &<span class="variable">lt</span>; <span class="number integer">1</span>) <span class="keyword">return</span> <span class="variable">m1</span> + (<span class="variable">m2</span> - <span class="variable">m1</span>) * <span class="variable">h</span> * <span class="number integer">6</span>;
    <span class="keyword">if</span> (<span class="variable">h</span> * <span class="number integer">2</span> &<span class="variable">lt</span>; <span class="number integer">1</span>) <span class="keyword">return</span> <span class="variable">m2</span>;
    <span class="keyword">if</span> (<span class="variable">h</span> * <span class="number integer">3</span> &<span class="variable">lt</span>; <span class="number integer">2</span>) <span class="keyword">return</span> <span class="variable">m1</span> + (<span class="variable">m2</span> - <span class="variable">m1</span>) * (<span class="number integer">2</span>/<span class="number integer">3</span> - <span class="variable">h</span>) * <span class="number integer">6</span>;
    <span class="keyword">return</span> <span class="variable">m1</span>;
  }
  
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Color</span>(<span class="variable">r</span>,<span class="variable">g</span>,<span class="variable">b</span>,<span class="variable">a</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Clamp <code>n</code> &gt;= 0 and &lt;= 255.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Number</em>  n</p></li><li><p><strong>return</strong>: <em>Number</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">function</span> <span class="variable">clamp</span>(<span class="variable">n</span>) {
  <span class="keyword">return</span> <span class="class">Math</span>.<span class="variable">max</span>(<span class="number integer">0</span>, <span class="class">Math</span>.<span class="variable">min</span>(<span class="variable">n</span>.<span class="variable">toFixed</span>(<span class="number integer">0</span>), <span class="number integer">255</span>));
}</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Clamp alpha <code>n</code> &gt;= 0 and &lt;= 1.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Number</em>  n</p></li><li><p><strong>return</strong>: <em>Number</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">function</span> <span class="variable">clampAlpha</span>(<span class="variable">n</span>) {
  <span class="keyword">return</span> <span class="class">Math</span>.<span class="variable">max</span>(<span class="number integer">0</span>, <span class="class">Math</span>.<span class="variable">min</span>(<span class="variable">n</span>, <span class="number integer">1</span>));
}
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/expression.js"><a href="#">expression</a></h2></td><td>lib/nodes/expression.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Expression</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Boolean</em>  isList</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Expression</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Expression</span>(<span class="variable">isList</span>){
  <span class="this">this</span>.<span class="variable">nodes</span> = [];
  <span class="this">this</span>.<span class="variable">isList</span> = <span class="variable">isList</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Check if the variable has a value.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Expression</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'isEmpty'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> !<span class="this">this</span>.<span class="variable">nodes</span>.<span class="variable">length</span>;
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the first node in this expression.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Node</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Expression</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'first'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">nodes</span>[<span class="number integer">0</span>].<span class="variable">first</span>;
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Expression</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Push the given <code>node</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  node</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Expression</span>.<span class="variable">prototype</span>.<span class="variable">push</span> = <span class="keyword">function</span>(<span class="variable">node</span>){
  <span class="this">this</span>.<span class="variable">nodes</span>.<span class="variable">push</span>(<span class="variable">node</span>);
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/function.js"><a href="#">function</a></h2></td><td>lib/nodes/function.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Function</code> with <code>name</code>, <code>params</code>, and <code>body</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name</p></li><li><p><strong>param</strong>: <em>Params</em>  params</p></li><li><p><strong>param</strong>: <em>Block</em>  body</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Function</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Function</span>(<span class="variable">name</span>, <span class="variable">params</span>, <span class="variable">body</span>){
  <span class="this">this</span>.<span class="variable">name</span> = <span class="variable">name</span>;
  <span class="this">this</span>.<span class="variable">params</span> = <span class="variable">params</span>;
  <span class="this">this</span>.<span class="variable">block</span> = <span class="variable">body</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Check function arity.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Function</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'arity'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">params</span>.<span class="variable">length</span>;
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Function</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return &lt;name&gt;(@param1, @param2, ...).</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Function</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">name</span>
    + <span class="string">'('</span>
    + <span class="this">this</span>.<span class="variable">params</span>.<span class="variable">nodes</span>.<span class="variable">join</span>(<span class="string">', '</span>)
    + <span class="string">')'</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/hsla.js"><a href="#">hsla</a></h2></td><td>lib/nodes/hsla.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'./'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>HSLA</code> with the given h,s,l,a component values.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Number</em>  h</p></li><li><p><strong>param</strong>: <em>Number</em>  s</p></li><li><p><strong>param</strong>: <em>Number</em>  l</p></li><li><p><strong>param</strong>: <em>Number</em>  a</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">HSLA</span> = <span class="variable">exports</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">HSLA</span>(<span class="variable">h</span>,<span class="variable">s</span>,<span class="variable">l</span>,<span class="variable">a</span>){
  <span class="this">this</span>.<span class="variable">h</span> = <span class="variable">h</span>;
  <span class="this">this</span>.<span class="variable">s</span> = <span class="variable">s</span>;
  <span class="this">this</span>.<span class="variable">l</span> = <span class="variable">l</span>;
  <span class="this">this</span>.<span class="variable">a</span> = <span class="variable">clampAlpha</span>(<span class="variable">a</span>);
  <span class="this">this</span>.<span class="variable">hsl</span> = <span class="this">this</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">HSLA</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return hsla(n,n,n,n).</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">HSLA</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="string">'hsla('</span>
    + <span class="this">this</span>.<span class="variable">h</span> + <span class="string">','</span>
    + <span class="this">this</span>.<span class="variable">l</span> + <span class="string">','</span>
    + <span class="this">this</span>.<span class="variable">s</span> + <span class="string">','</span>
    + <span class="this">this</span>.<span class="variable">a</span> + <span class="string">')'</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return rgba <code>Color</code> representation.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Color</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">HSLA</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'rgba'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Color</span>.<span class="variable">fromHSLA</span>(<span class="this">this</span>);
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return <code>HSLA</code> representation of the given <code>color</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Color</em>  color</p></li><li><p><strong>return</strong>: <em>HSLA</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">fromColor</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="keyword">var</span> <span class="variable">r</span> = <span class="variable">color</span>.<span class="variable">r</span> / <span class="number integer">255</span>
    , <span class="variable">g</span> = <span class="variable">color</span>.<span class="variable">g</span> / <span class="number integer">255</span>
    , <span class="variable">b</span> = <span class="variable">color</span>.<span class="variable">b</span> / <span class="number integer">255</span>
    , <span class="variable">a</span> = <span class="variable">color</span>.<span class="variable">a</span>;

  <span class="keyword">var</span> <span class="variable">h</span>,<span class="variable">s</span>,<span class="variable">l</span>
    , <span class="variable">min</span> = <span class="class">Math</span>.<span class="variable">min</span>(<span class="variable">r</span>,<span class="variable">g</span>,<span class="variable">b</span>)
    , <span class="variable">max</span> = <span class="class">Math</span>.<span class="variable">max</span>(<span class="variable">r</span>,<span class="variable">g</span>,<span class="variable">b</span>)
    , <span class="variable">d</span> = <span class="variable">max</span> - <span class="variable">min</span>;

  <span class="keyword">switch</span> (<span class="variable">max</span>) {
    <span class="keyword">case</span> <span class="variable">min</span>: <span class="variable">h</span> = <span class="number integer">0</span>; <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="variable">r</span>: <span class="variable">h</span> = <span class="number integer">60</span> * (<span class="variable">g</span>-<span class="variable">b</span>) / <span class="variable">d</span>; <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="variable">g</span>: <span class="variable">h</span> = <span class="number integer">60</span> * (<span class="variable">b</span>-<span class="variable">r</span>) / <span class="variable">d</span> + <span class="number integer">120</span>; <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="variable">g</span>: <span class="variable">h</span> = <span class="number integer">60</span> * (<span class="variable">r</span>-<span class="variable">g</span>) / <span class="variable">d</span> + <span class="number integer">240</span>; <span class="keyword">break</span>;
  }
  
  <span class="variable">l</span> = (<span class="variable">max</span> + <span class="variable">min</span>) / <span class="number integer">2</span>;

  <span class="keyword">if</span> (<span class="variable">max</span> == <span class="variable">min</span>) {
    <span class="variable">s</span> = <span class="number integer">0</span>;
  } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">l</span> &<span class="variable">lt</span>; .<span class="number integer">5</span>) {
    <span class="variable">s</span> = <span class="variable">d</span> / (<span class="number integer">2</span> * <span class="variable">l</span>);
  } <span class="keyword">else</span> {
    <span class="variable">s</span> = <span class="variable">d</span> / (<span class="number integer">2</span> - <span class="number integer">2</span> * <span class="variable">l</span>);
  }

  <span class="variable">h</span> %= <span class="number integer">360</span>;
  <span class="variable">s</span> *= <span class="number integer">100</span>;
  <span class="variable">l</span> *= <span class="number integer">100</span>;

  <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">HSLA</span>(<span class="variable">h</span>,<span class="variable">s</span>,<span class="variable">l</span>,<span class="variable">a</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Clamp alpha <code>n</code> &gt;= 0 and &lt;= 1.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Number</em>  n</p></li><li><p><strong>return</strong>: <em>Number</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">function</span> <span class="variable">clampAlpha</span>(<span class="variable">n</span>) {
  <span class="keyword">return</span> <span class="class">Math</span>.<span class="variable">max</span>(<span class="number integer">0</span>, <span class="class">Math</span>.<span class="variable">min</span>(<span class="variable">n</span>, <span class="number integer">1</span>));
}
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/ident.js"><a href="#">ident</a></h2></td><td>lib/nodes/ident.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Ident</code> with the given <code>val</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  val</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Ident</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Ident</span>(<span class="variable">val</span>){
  <span class="this">this</span>.<span class="variable">val</span> = <span class="variable">val</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Ident</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the keyword string.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Ident</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">val</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/index.js"><a href="#">index</a></h2></td><td>lib/nodes/index.js</td></tr><tr class="code">
<td class="docs">
<p>Constructors
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);
<span class="variable">exports</span>.<span class="class">Root</span> = <span class="variable">require</span>(<span class="string">'./root'</span>);
<span class="variable">exports</span>.<span class="class">Null</span> = <span class="variable">require</span>(<span class="string">'./null'</span>);
<span class="variable">exports</span>.<span class="class">Call</span> = <span class="variable">require</span>(<span class="string">'./call'</span>);
<span class="variable">exports</span>.<span class="class">UnaryOp</span> = <span class="variable">require</span>(<span class="string">'./unaryop'</span>);
<span class="variable">exports</span>.<span class="class">BinOp</span> = <span class="variable">require</span>(<span class="string">'./binop'</span>);
<span class="variable">exports</span>.<span class="class">Ternary</span> = <span class="variable">require</span>(<span class="string">'./ternary'</span>);
<span class="variable">exports</span>.<span class="class">Block</span> = <span class="variable">require</span>(<span class="string">'./block'</span>);
<span class="variable">exports</span>.<span class="class">Unit</span> = <span class="variable">require</span>(<span class="string">'./unit'</span>);
<span class="variable">exports</span>.<span class="class">String</span> = <span class="variable">require</span>(<span class="string">'./string'</span>);
<span class="variable">exports</span>.<span class="class">HSLA</span> = <span class="variable">require</span>(<span class="string">'./hsla'</span>);
<span class="variable">exports</span>.<span class="class">Color</span> = <span class="variable">require</span>(<span class="string">'./color'</span>);
<span class="variable">exports</span>.<span class="class">Ident</span> = <span class="variable">require</span>(<span class="string">'./ident'</span>);
<span class="variable">exports</span>.<span class="class">Boolean</span> = <span class="variable">require</span>(<span class="string">'./boolean'</span>);
<span class="variable">exports</span>.<span class="class">Params</span> = <span class="variable">require</span>(<span class="string">'./params'</span>);
<span class="variable">exports</span>.<span class="class">Function</span> = <span class="variable">require</span>(<span class="string">'./function'</span>);
<span class="variable">exports</span>.<span class="class">Variable</span> = <span class="variable">require</span>(<span class="string">'./variable'</span>);
<span class="variable">exports</span>.<span class="class">Property</span> = <span class="variable">require</span>(<span class="string">'./property'</span>);
<span class="variable">exports</span>.<span class="class">Selector</span> = <span class="variable">require</span>(<span class="string">'./selector'</span>);
<span class="variable">exports</span>.<span class="class">Expression</span> = <span class="variable">require</span>(<span class="string">'./expression'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Singletons.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">true</span> = <span class="keyword">new</span> <span class="variable">exports</span>.<span class="class">Boolean</span>(<span class="variable">true</span>);
<span class="variable">exports</span>.<span class="variable">false</span> = <span class="keyword">new</span> <span class="variable">exports</span>.<span class="class">Boolean</span>(<span class="variable">false</span>);</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/node.js"><a href="#">node</a></h2></td><td>lib/nodes/node.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Serializer</span> = <span class="variable">require</span>(<span class="string">'../visitor/serializer'</span>)
  , <span class="class">Evaluator</span> = <span class="variable">require</span>(<span class="string">'../visitor/evaluator'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'./'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Node constructor.</p>

<ul><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Node</span>(){};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return this node.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Node</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Node</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'first'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>;
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Nodes by default evaluate to themselves.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Node</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Node</span>.<span class="variable">prototype</span>.<span class="variable">eval</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Evaluator</span>(<span class="this">this</span>).<span class="variable">evaluate</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Convert node(s) to plain objects, for example
a <code>String</code> node will simply become a string literal.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Mixed</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Node</span>.<span class="variable">prototype</span>.<span class="variable">toObject</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Serializer</span>(<span class="this">this</span>).<span class="variable">serialize</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Convert node(s) to a JSON string.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Node</span>.<span class="variable">prototype</span>.<span class="variable">toJSON</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="class">JSON</span>.<span class="variable">stringify</span>(<span class="this">this</span>.<span class="variable">toObject</span>());
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return true.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Node</span>.<span class="variable">prototype</span>.<span class="variable">toBoolean</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="variable">true</span>;
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/null.js"><a href="#">null</a></h2></td><td>lib/nodes/null.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Null</code> node.</p>

<ul><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Null</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Null</span>(){};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Null</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return 'Null'.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Null</span>.<span class="variable">prototype</span>.<span class="variable">inspect</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="string">'[Null]'</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return false.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Null</span>.<span class="variable">prototype</span>.<span class="variable">toBoolean</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="variable">false</span>;
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/params.js"><a href="#">params</a></h2></td><td>lib/nodes/params.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Params</code> with <code>name</code>, <code>params</code>, and <code>body</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name</p></li><li><p><strong>param</strong>: <em>Params</em>  params</p></li><li><p><strong>param</strong>: <em>Expression</em>  body</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Params</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Params</span>(){
  <span class="this">this</span>.<span class="variable">nodes</span> = [];
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Check function arity.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Params</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'length'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">nodes</span>.<span class="variable">length</span>;
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Params</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Push the given <code>node</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  node</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Params</span>.<span class="variable">prototype</span>.<span class="variable">push</span> = <span class="keyword">function</span>(<span class="variable">node</span>){
  <span class="this">this</span>.<span class="variable">nodes</span>.<span class="variable">push</span>(<span class="variable">node</span>);
};

</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/property.js"><a href="#">property</a></h2></td><td>lib/nodes/property.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Property</code> with the given <code>name</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Property</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Property</span>(<span class="variable">name</span>){
  <span class="this">this</span>.<span class="variable">name</span> = <span class="variable">name</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Property</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/root.js"><a href="#">root</a></h2></td><td>lib/nodes/root.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Root</code> node.</p>

<ul><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Root</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Root</span>(){
  <span class="this">this</span>.<span class="variable">nodes</span> = [];
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Root</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Push a <code>node</code> to this block.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  node</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Root</span>.<span class="variable">prototype</span>.<span class="variable">push</span> = <span class="keyword">function</span>(<span class="variable">node</span>){
  <span class="this">this</span>.<span class="variable">nodes</span>.<span class="variable">push</span>(<span class="variable">node</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return "root".</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Root</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="string">'root'</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/selector.js"><a href="#">selector</a></h2></td><td>lib/nodes/selector.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Block</span> = <span class="variable">require</span>(<span class="string">'./block'</span>)
  , <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Selector</code> with the given <code>val</code> and <code>block</code>
which defaults to an empty block.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  val</p></li><li><p><strong>param</strong>: <em>Block</em>  block</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Selector</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Selector</span>(<span class="variable">val</span>, <span class="variable">block</span>){
  <span class="this">this</span>.<span class="variable">val</span> = <span class="variable">val</span>;
  <span class="this">this</span>.<span class="variable">block</span> = <span class="variable">block</span> || <span class="keyword">new</span> <span class="class">Block</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Selector</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the selector string.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Selector</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">val</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/string.js"><a href="#">string</a></h2></td><td>lib/nodes/string.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'./'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>String</code> with the given <code>val</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  val</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">String</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">String</span>(<span class="variable">val</span>){
  <span class="this">this</span>.<span class="variable">val</span> = <span class="variable">val</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">String</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return quoted string.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">String</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="string">'&quot;'</span> + <span class="this">this</span>.<span class="variable">val</span> + <span class="string">'&quot;'</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return Boolean based on the length of this string.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">String</span>.<span class="variable">prototype</span>.<span class="variable">toBoolean</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="this">this</span>.<span class="variable">val</span>.<span class="variable">length</span>);
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/ternary.js"><a href="#">ternary</a></h2></td><td>lib/nodes/ternary.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Ternary</code> with <code>cond</code>, <code>trueExpr</code> and <code>falseExpr</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Expression</em>  cond</p></li><li><p><strong>param</strong>: <em>Expression</em>  trueExpr</p></li><li><p><strong>param</strong>: <em>Expression</em>  falseExpr</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Ternary</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Ternary</span>(<span class="variable">cond</span>, <span class="variable">trueExpr</span>, <span class="variable">falseExpr</span>){
  <span class="this">this</span>.<span class="variable">cond</span> = <span class="variable">cond</span>;
  <span class="this">this</span>.<span class="variable">trueExpr</span> = <span class="variable">trueExpr</span>;
  <span class="this">this</span>.<span class="variable">falseExpr</span> = <span class="variable">falseExpr</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Ternary</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/unaryop.js"><a href="#">unaryop</a></h2></td><td>lib/nodes/unaryop.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>UnaryOp</code> with <code>op</code>, and <code>expr</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  op</p></li><li><p><strong>param</strong>: <em>Node</em>  expr</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">UnaryOp</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">UnaryOp</span>(<span class="variable">op</span>, <span class="variable">expr</span>){
  <span class="this">this</span>.<span class="variable">op</span> = <span class="variable">op</span>;
  <span class="this">this</span>.<span class="variable">expr</span> = <span class="variable">expr</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">UnaryOp</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/unit.js"><a href="#">unit</a></h2></td><td>lib/nodes/unit.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'./'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Unit</code> with the given <code>val</code> and unit <code>type</code>
such as "px", "pt", "in", etc.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  val</p></li><li><p><strong>param</strong>: <em>String</em>  type</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Unit</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Unit</span>(<span class="variable">val</span>, <span class="variable">type</span>){
  <span class="this">this</span>.<span class="variable">val</span> = <span class="variable">val</span>;
  <span class="this">this</span>.<span class="variable">type</span> = <span class="variable">type</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Unit</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return Boolean based on the unit value.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Node</span>.<span class="variable">prototype</span>.<span class="variable">toBoolean</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="this">this</span>.<span class="variable">val</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return unit string.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Unit</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">var</span> <span class="variable">n</span> = <span class="this">this</span>.<span class="variable">val</span>;
  <span class="keyword">if</span> (<span class="string">'px'</span> == <span class="this">this</span>.<span class="variable">type</span>) <span class="variable">n</span> = <span class="variable">n</span>.<span class="variable">toFixed</span>(<span class="number integer">0</span>);
  <span class="keyword">return</span> <span class="variable">n</span> + (<span class="this">this</span>.<span class="variable">type</span> || <span class="string">''</span>);
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/nodes/variable.js"><a href="#">variable</a></h2></td><td>lib/nodes/variable.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Node</span> = <span class="variable">require</span>(<span class="string">'./node'</span>)
  , <span class="class">Null</span> = <span class="variable">require</span>(<span class="string">'./null'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Variable</code> by <code>name</code> with the given <code>val</code> node.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name</p></li><li><p><strong>param</strong>: <em>Node</em>  val</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Variable</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Variable</span>(<span class="variable">name</span>, <span class="variable">val</span>){
  <span class="this">this</span>.<span class="variable">name</span> = <span class="variable">name</span>;
  <span class="this">this</span>.<span class="variable">val</span> = <span class="variable">val</span> || <span class="keyword">new</span> <span class="class">Null</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Check if the variable has a value.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Boolean</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Variable</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'isEmpty'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="variable">undefined</span> == <span class="this">this</span>.<span class="variable">val</span>;
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Node.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Variable</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Node</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return @&lt;name&gt;.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Variable</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="string">'@'</span> + <span class="this">this</span>.<span class="variable">name</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/parser.js"><a href="#">parser</a></h2></td><td>lib/parser.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Lexer</span> = <span class="variable">require</span>(<span class="string">'./lexer'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'./nodes'</span>)
  , <span class="variable">inspect</span> = <span class="variable">require</span>(<span class="string">'sys'</span>).<span class="variable">inspect</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Parser</code> with the given <code>str</code> and <code>options</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  str</p></li><li><p><strong>param</strong>: <em>Object</em>  options</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Parser</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Parser</span>(<span class="variable">str</span>, <span class="variable">options</span>) {
  <span class="variable">options</span> = <span class="variable">options</span> || {};
  <span class="this">this</span>.<span class="variable">str</span> = <span class="variable">str</span>;
  <span class="this">this</span>.<span class="variable">filename</span> = <span class="variable">options</span>.<span class="variable">filename</span> || <span class="string">'css'</span>;
  <span class="this">this</span>.<span class="variable">lexer</span> = <span class="keyword">new</span> <span class="class">Lexer</span>(<span class="variable">str</span>, <span class="variable">options</span>);
  <span class="this">this</span>.<span class="variable">lexer</span>.<span class="variable">isSelector</span> = <span class="variable">true</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Parser prototype.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Parser</span>.<span class="variable">prototype</span> = {</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Parse the input, then return the root node.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Node</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">parse</span>: <span class="keyword">function</span>(){
    <span class="keyword">var</span> <span class="variable">block</span> = <span class="this">this</span>.<span class="variable">root</span> = <span class="this">this</span>.<span class="variable">parent</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Root</span>;
    <span class="keyword">while</span> (<span class="string">'eos'</span> != <span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">type</span>) {
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'newline'</span>)) <span class="keyword">continue</span>;
      <span class="keyword">var</span> <span class="variable">stmt</span> = <span class="this">this</span>.<span class="variable">statement</span>;
      <span class="keyword">if</span> (!<span class="variable">stmt</span>) <span class="this">this</span>.<span class="variable">error</span>(<span class="string">'unexpected token {peek}, not allowed at the root level'</span>);
      <span class="variable">block</span>.<span class="variable">push</span>(<span class="variable">stmt</span>);
    }
    <span class="keyword">return</span> <span class="variable">block</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Throw an <code>Error</code> with the given <code>msg</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  msg</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">error</span>: <span class="keyword">function</span>(<span class="variable">msg</span>){
    <span class="keyword">var</span> <span class="variable">type</span> = <span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">type</span>
      , <span class="variable">val</span> = <span class="variable">undefined</span> == <span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">val</span>
        ? <span class="string">''</span>
        : <span class="string">' '</span> + <span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">toString</span>();
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="variable">msg</span>.<span class="variable">replace</span>(<span class="string">'{peek}'</span>, <span class="variable">type</span> + <span class="variable">val</span>));
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Accept the given token <code>type</code>, and return it,
otherwise return <code>undefined</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  type</p></li><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">accept</span>: <span class="keyword">function</span>(<span class="variable">type</span>){
    <span class="keyword">if</span> (<span class="variable">type</span> == <span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">type</span>) {
      <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">next</span>;
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Expect token <code>type</code> and return it, throw otherwise.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  type</p></li><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">expect</span>: <span class="keyword">function</span>(<span class="variable">type</span>){
    <span class="keyword">if</span> (<span class="variable">type</span> != <span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">type</span>) {
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'expected '</span> + <span class="variable">type</span> + <span class="string">', got '</span> + <span class="this">this</span>.<span class="variable">peek</span>);
    }
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">next</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Get the next token.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">next</span>() {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">lexer</span>.<span class="variable">next</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Peek with lookahead(1).</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">peek</span>() {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">lexer</span>.<span class="variable">peek</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Lookahead <code>n</code> tokens.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Number</em>  n</p></li><li><p><strong>return</strong>: <em>Token</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">lookahead</span>: <span class="keyword">function</span>(<span class="variable">n</span>){
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">lexer</span>.<span class="variable">lookahead</span>(<span class="variable">n</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>   variable
 | property
 | selector
 | expression
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">statement</span>() {
    <span class="keyword">var</span> <span class="variable">type</span> = <span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">type</span>;
    <span class="keyword">switch</span> (<span class="variable">type</span>) {
      <span class="keyword">case</span> <span class="string">'property'</span>:
      <span class="keyword">case</span> <span class="string">'selector'</span>:
        <span class="keyword">return</span> <span class="this">this</span>[<span class="variable">type</span>];
      <span class="keyword">default</span>:
        <span class="keyword">var</span> <span class="variable">expr</span> = <span class="this">this</span>.<span class="variable">expression</span>;
        <span class="keyword">if</span> (<span class="variable">expr</span>.<span class="variable">isEmpty</span>) <span class="this">this</span>.<span class="variable">error</span>(<span class="string">'unexpected {peek} in expression'</span>);
        <span class="keyword">return</span> <span class="variable">expr</span>;
    }
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>indent (!outdent)+ outdent
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">block</span>() {
    <span class="keyword">var</span> <span class="variable">block</span> = <span class="this">this</span>.<span class="variable">parent</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Block</span>(<span class="this">this</span>.<span class="variable">parent</span>);
    <span class="this">this</span>.<span class="variable">expect</span>(<span class="string">'indent'</span>);
    <span class="keyword">while</span> (<span class="string">'outdent'</span> != <span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">type</span>) {
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'newline'</span>)) <span class="keyword">continue</span>;
      <span class="keyword">var</span> <span class="variable">stmt</span> = <span class="this">this</span>.<span class="variable">statement</span>;
      <span class="keyword">if</span> (!<span class="variable">stmt</span>) <span class="this">this</span>.<span class="variable">error</span>(<span class="string">'unexpected token {peek} in block'</span>);
      <span class="variable">block</span>.<span class="variable">push</span>(<span class="variable">stmt</span>);
    }
    <span class="this">this</span>.<span class="variable">expect</span>(<span class="string">'outdent'</span>);
    <span class="this">this</span>.<span class="variable">parent</span> = <span class="variable">block</span>.<span class="variable">parent</span>;
    <span class="keyword">return</span> <span class="variable">block</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>property expression
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">property</span>() {
    <span class="keyword">var</span> <span class="variable">name</span> = <span class="this">this</span>.<span class="variable">expect</span>(<span class="string">'property'</span>).<span class="variable">val</span>
      , <span class="variable">prop</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Property</span>(<span class="variable">name</span>);

    <span class="this">this</span>.<span class="variable">lexer</span>.<span class="variable">isSelector</span> = <span class="variable">false</span>;
    <span class="variable">prop</span>.<span class="variable">expr</span> = <span class="this">this</span>.<span class="variable">list</span>;
    <span class="keyword">if</span> (<span class="variable">prop</span>.<span class="variable">expr</span>.<span class="variable">isEmpty</span>) <span class="this">this</span>.<span class="variable">error</span>(<span class="string">'property &quot;'</span> + <span class="variable">name</span> + <span class="string">'&quot; expects an expression, got {peek}'</span>);
    <span class="this">this</span>.<span class="variable">lexer</span>.<span class="variable">isSelector</span> = <span class="variable">true</span>;

    <span class="keyword">return</span> <span class="variable">prop</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>selector
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">selector</span>() {
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Selector</span>(<span class="this">this</span>.<span class="variable">expect</span>(<span class="string">'selector'</span>).<span class="variable">val</span>, <span class="this">this</span>.<span class="variable">block</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>  variable '=' expression
| function
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">variable</span>() {
    <span class="keyword">var</span> <span class="variable">name</span> = <span class="this">this</span>.<span class="variable">_name</span> = <span class="this">this</span>.<span class="variable">expect</span>(<span class="string">'variable'</span>).<span class="variable">val</span>.<span class="variable">name</span>;
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'='</span>)) {
      <span class="this">this</span>.<span class="variable">lexer</span>.<span class="variable">isSelector</span> = <span class="variable">false</span>;
      <span class="keyword">var</span> <span class="variable">expr</span> = <span class="this">this</span>.<span class="variable">list</span>;
      <span class="keyword">if</span> (<span class="variable">expr</span>.<span class="variable">isEmpty</span>) <span class="this">this</span>.<span class="variable">error</span>(<span class="string">'invalid right-hand side operand in assignment, got {peek}'</span>)
      <span class="keyword">var</span> <span class="variable">tok</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Variable</span>(<span class="variable">name</span>, <span class="variable">expr</span>);
      <span class="this">this</span>.<span class="variable">lexer</span>.<span class="variable">isSelector</span> = <span class="variable">true</span>;
      <span class="keyword">return</span> <span class="variable">tok</span>;
    }
    <span class="keyword">return</span> <span class="this">this</span>.<span class="keyword">function</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>  variable '(' params ')' block
| variable '(' expression ')'
| variable
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">name</span> = <span class="this">this</span>.<span class="variable">_name</span>;
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'('</span>)) {
      <span class="keyword">var</span> <span class="variable">tok</span>
        , <span class="variable">i</span> = <span class="number integer">1</span>
        , <span class="variable">parens</span> = <span class="number integer">1</span>;

      <span class="comment">// Lookahead and determine if we are dealing</span>
      <span class="comment">// with a function call or definition. Here</span>
      <span class="comment">// we pair parens to prevent false negatives</span>
      <span class="variable">out</span>:
      <span class="keyword">while</span> (<span class="variable">tok</span> = <span class="this">this</span>.<span class="variable">lookahead</span>(<span class="variable">i</span>++)) {
        <span class="keyword">switch</span> (<span class="variable">tok</span>.<span class="variable">type</span>) {
          <span class="keyword">case</span> <span class="string">'('</span>: ++<span class="variable">parens</span>; <span class="keyword">break</span>;
          <span class="keyword">case</span> <span class="string">')'</span>: <span class="keyword">if</span> (!--<span class="variable">parens</span>) <span class="keyword">break</span> <span class="variable">out</span>;
        }
      }

      <span class="comment">// Definition or call</span>
      <span class="keyword">return</span> <span class="string">'indent'</span> == <span class="this">this</span>.<span class="variable">lookahead</span>(<span class="variable">i</span>).<span class="variable">type</span>
        ? <span class="this">this</span>.<span class="variable">functionDefinition</span>
        : <span class="this">this</span>.<span class="variable">functionCall</span>;
    }
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Variable</span>(<span class="variable">name</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>variable '(' expression ')'
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">functionCall</span>() {
    <span class="keyword">var</span> <span class="variable">name</span> = <span class="this">this</span>.<span class="variable">_name</span>
      , <span class="variable">args</span> = <span class="this">this</span>.<span class="variable">list</span>;
    <span class="this">this</span>.<span class="variable">expect</span>(<span class="string">')'</span>);
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Call</span>(<span class="variable">name</span>, <span class="variable">args</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>variable '(' params ')' block
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">functionDefinition</span>() {
    <span class="keyword">var</span> <span class="variable">name</span> = <span class="this">this</span>.<span class="variable">_name</span>;
    <span class="keyword">var</span> <span class="variable">params</span> = <span class="this">this</span>.<span class="variable">params</span>;
    <span class="this">this</span>.<span class="variable">expect</span>(<span class="string">')'</span>);
    <span class="keyword">var</span> <span class="variable">fn</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Function</span>(<span class="variable">name</span>, <span class="variable">params</span>, <span class="this">this</span>.<span class="variable">block</span>);
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Variable</span>(<span class="variable">name</span>, <span class="variable">fn</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>(variable (',' variable ('=' expression)?)*)?
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">params</span>() {
    <span class="keyword">var</span> <span class="variable">tok</span>
      , <span class="variable">params</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Params</span>;
    <span class="keyword">while</span> (<span class="variable">tok</span> = <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'variable'</span>)) {
      <span class="variable">params</span>.<span class="variable">push</span>(<span class="variable">tok</span>.<span class="variable">val</span>);
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'='</span>)) {
        <span class="variable">tok</span>.<span class="variable">val</span>.<span class="variable">val</span> = <span class="this">this</span>.<span class="variable">expression</span>;
      }
      <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">','</span>);
    }
    <span class="keyword">return</span> <span class="variable">params</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>expression (',' expression)*
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">list</span>() {
    <span class="keyword">var</span> <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">expression</span>;
    <span class="keyword">while</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">','</span>)) {
      <span class="keyword">if</span> (<span class="variable">node</span>.<span class="variable">isList</span>) {
        <span class="variable">list</span>.<span class="variable">push</span>(<span class="this">this</span>.<span class="variable">expression</span>);
      } <span class="keyword">else</span> {
        <span class="keyword">var</span> <span class="variable">list</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Expression</span>(<span class="variable">true</span>);
        <span class="variable">list</span>.<span class="variable">push</span>(<span class="variable">node</span>);
        <span class="variable">list</span>.<span class="variable">push</span>(<span class="this">this</span>.<span class="variable">expression</span>);
        <span class="variable">node</span> = <span class="variable">list</span>;
      }
    }
    <span class="keyword">return</span> <span class="variable">node</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>defined+
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">expression</span>() {
    <span class="keyword">var</span> <span class="variable">node</span>
      , <span class="variable">expr</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Expression</span>;
    <span class="keyword">while</span> (<span class="variable">node</span> = <span class="this">this</span>.<span class="variable">ternary</span>) {
      <span class="keyword">if</span> (!<span class="variable">node</span>) <span class="this">this</span>.<span class="variable">error</span>(<span class="string">'unexpected token {peek} in expression'</span>);
      <span class="variable">expr</span>.<span class="variable">push</span>(<span class="variable">node</span>);
    }
    <span class="keyword">return</span> <span class="variable">expr</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>logical ('?' expression : expression)?
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">ternary</span>() {
    <span class="keyword">var</span> <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">logical</span>;
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'?'</span>)) {
      <span class="keyword">var</span> <span class="variable">trueExpr</span> = <span class="this">this</span>.<span class="variable">expression</span>;
      <span class="this">this</span>.<span class="variable">expect</span>(<span class="string">':'</span>);
      <span class="keyword">var</span> <span class="variable">falseExpr</span> = <span class="this">this</span>.<span class="variable">expression</span>;
      <span class="variable">node</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Ternary</span>(<span class="variable">node</span>, <span class="variable">trueExpr</span>, <span class="variable">falseExpr</span>);
    }
    <span class="keyword">return</span> <span class="variable">node</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>defined (('&amp;&amp;' | '||') defined)*
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">logical</span>() {
    <span class="keyword">var</span> <span class="variable">op</span>
      , <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">defined</span>;
    <span class="keyword">while</span> (<span class="variable">op</span> = <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'&amp;&amp;'</span>) || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'||'</span>)) {
      <span class="variable">node</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">BinOp</span>(<span class="variable">op</span>.<span class="variable">type</span>, <span class="variable">node</span>, <span class="this">this</span>.<span class="variable">defined</span>);
    }
    <span class="keyword">return</span> <span class="variable">node</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>   equality 'is defined'
 | equality
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">defined</span>() {
    <span class="keyword">var</span> <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">equality</span>;
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'is defined'</span>)) {
      <span class="variable">node</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">BinOp</span>(<span class="string">'is defined'</span>, <span class="variable">node</span>);
    }
    <span class="keyword">return</span> <span class="variable">node</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>typecheck (('==' | '&gt;=' | '&lt;=' | '&gt;' | '&lt;') typecheck)*
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">equality</span>() {
    <span class="keyword">var</span> <span class="variable">op</span>
      , <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">typecheck</span>;
    <span class="keyword">while</span> (<span class="variable">op</span> = 
         <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'=='</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'&gt;='</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'&lt;='</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'&lt;'</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'&gt;'</span>)
      ) {
      <span class="variable">node</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">BinOp</span>(<span class="variable">op</span>.<span class="variable">type</span>, <span class="variable">node</span>, <span class="this">this</span>.<span class="variable">typecheck</span>);
    }
    <span class="keyword">return</span> <span class="variable">node</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>additive ('is a' additive)*
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">typecheck</span>() {
    <span class="keyword">var</span> <span class="variable">op</span>
      , <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">additive</span>;
    <span class="keyword">while</span> (<span class="variable">op</span> = <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'is a'</span>)) {
      <span class="variable">node</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">BinOp</span>(<span class="variable">op</span>.<span class="variable">type</span>, <span class="variable">node</span>, <span class="this">this</span>.<span class="variable">additive</span>);
    }
    <span class="keyword">return</span> <span class="variable">node</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>multiplicative (('+' | '-') multiplicative)*
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">additive</span>() {
    <span class="keyword">var</span> <span class="variable">op</span>
      , <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">multiplicative</span>;
    <span class="keyword">while</span> (<span class="variable">op</span> = <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'+'</span>) || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'-'</span>)) {
      <span class="variable">node</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">BinOp</span>(<span class="variable">op</span>.<span class="variable">type</span>, <span class="variable">node</span>, <span class="this">this</span>.<span class="variable">multiplicative</span>);
    }
    <span class="keyword">return</span> <span class="variable">node</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>unary (('**' | '<em>' | '/' | '%') unary)</em>
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">multiplicative</span>() {
    <span class="keyword">var</span> <span class="variable">op</span>
      , <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">unary</span>;
    <span class="keyword">while</span> (<span class="variable">op</span> =
         <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'**'</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'*'</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'/'</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'%'</span>)) {
      <span class="variable">node</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">BinOp</span>(<span class="variable">op</span>.<span class="variable">type</span>, <span class="variable">node</span>, <span class="this">this</span>.<span class="variable">unary</span>);
    }
    <span class="keyword">return</span> <span class="variable">node</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>  (('!' | '~' | '-' | '+') expression)+
| primary
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">unary</span>() {
    <span class="keyword">var</span> <span class="variable">op</span>, <span class="variable">node</span>;
    <span class="keyword">while</span> (<span class="variable">op</span> = 
         <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'!'</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'~'</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'-'</span>)
      || <span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'+'</span>)) {
      <span class="variable">node</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">UnaryOp</span>(<span class="variable">op</span>.<span class="variable">type</span>, <span class="variable">node</span> || <span class="this">this</span>.<span class="variable">expression</span>);
    }
    <span class="keyword">return</span> <span class="variable">node</span> || <span class="this">this</span>.<span class="variable">primary</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>  unit
| color
| string
| variable
| ident
| boolean
| '(' expression ')'
   </p>
</td>
<td class="code">
<pre><code><span class="variable">get</span> <span class="variable">primary</span>() {
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">accept</span>(<span class="string">'('</span>)) {
      <span class="keyword">var</span> <span class="variable">expr</span> = <span class="this">this</span>.<span class="variable">expression</span>;
      <span class="this">this</span>.<span class="variable">expect</span>(<span class="string">')'</span>);
      <span class="keyword">return</span> <span class="variable">expr</span>;
    }
    <span class="keyword">switch</span> (<span class="this">this</span>.<span class="variable">peek</span>.<span class="variable">type</span>) {
      <span class="keyword">case</span> <span class="string">'unit'</span>:
      <span class="keyword">case</span> <span class="string">'color'</span>:
      <span class="keyword">case</span> <span class="string">'string'</span>:
      <span class="keyword">case</span> <span class="string">'ident'</span>:
      <span class="keyword">case</span> <span class="string">'boolean'</span>:
        <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">next</span>.<span class="variable">val</span>;
      <span class="keyword">case</span> <span class="string">'variable'</span>:
        <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">variable</span>;
    }
  }
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/renderer.js"><a href="#">renderer</a></h2></td><td>lib/renderer.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Parser</span> = <span class="variable">require</span>(<span class="string">'./parser'</span>)
  , <span class="class">Compiler</span> = <span class="variable">require</span>(<span class="string">'./visitor/compiler'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Renderer</code> with the given <code>str</code> and <code>options</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  str</p></li><li><p><strong>param</strong>: <em>Object</em>  options</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Renderer</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Renderer</span>(<span class="variable">str</span>, <span class="variable">options</span>) {
  <span class="variable">options</span> = <span class="variable">options</span> || {};
  <span class="this">this</span>.<span class="variable">options</span> = <span class="variable">options</span>;
  <span class="this">this</span>.<span class="variable">str</span> = <span class="variable">str</span>;
  <span class="this">this</span>.<span class="variable">filename</span> = <span class="variable">options</span>.<span class="variable">filename</span> || <span class="string">'css'</span>;
  <span class="this">this</span>.<span class="variable">parser</span> = <span class="keyword">new</span> <span class="class">Parser</span>(<span class="variable">str</span>, <span class="variable">options</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Parse and evaluate AST, then callback <code>fn(err, css)</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Function</em>  fn</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Renderer</span>.<span class="variable">prototype</span>.<span class="variable">render</span> = <span class="keyword">function</span>(<span class="variable">fn</span>){
  <span class="keyword">try</span> {
    <span class="keyword">var</span> <span class="variable">ast</span> = <span class="this">this</span>.<span class="variable">parser</span>.<span class="variable">parse</span>();
    <span class="keyword">var</span> <span class="variable">compiler</span> = <span class="keyword">new</span> <span class="class">Compiler</span>(<span class="variable">ast</span>.<span class="variable">eval</span>(), <span class="this">this</span>.<span class="variable">options</span>);
    <span class="variable">compiler</span>.<span class="variable">compile</span>(<span class="variable">fn</span>);
  } <span class="keyword">catch</span> (<span class="variable">err</span>) {
    <span class="variable">fn</span>(<span class="variable">err</span>);
  }
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/stack/frame.js"><a href="#">frame</a></h2></td><td>lib/stack/frame.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Scope</span> = <span class="variable">require</span>(<span class="string">'./scope'</span>)
  , <span class="variable">blocks</span> = <span class="variable">require</span>(<span class="string">'../nodes'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Frame</code> with the given <code>block</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Block</em>  block</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Frame</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Frame</span>(<span class="variable">block</span>) {
  <span class="this">this</span>.<span class="variable">scope</span> = <span class="keyword">new</span> <span class="class">Scope</span>;
  <span class="this">this</span>.<span class="variable">block</span> = <span class="variable">block</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Lookup the given local variable <code>name</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name</p></li><li><p><strong>return</strong>: <em>Node</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Frame</span>.<span class="variable">prototype</span>.<span class="variable">lookup</span> = <span class="keyword">function</span>(<span class="variable">name</span>){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">scope</span>.<span class="variable">lookup</span>(<span class="variable">name</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Custom inspect.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Frame</span>.<span class="variable">prototype</span>.<span class="variable">inspect</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="string">'[Frame '</span>
    + <span class="this">this</span>.<span class="variable">block</span> + <span class="string">' '</span>
    + <span class="this">this</span>.<span class="variable">scope</span>.<span class="variable">inspect</span>()
    + <span class="string">']'</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/stack/index.js"><a href="#">index</a></h2></td><td>lib/stack/index.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Frame</span> = <span class="variable">require</span>(<span class="string">'./frame'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Stack</code>.</p>

<ul><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Stack</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Stack</span>() {
  <span class="class">Array</span>.<span class="variable">apply</span>(<span class="this">this</span>, <span class="variable">arguments</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Array.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Stack</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Array</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the current stack <code>Frame</code>.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Frame</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Stack</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'currentFrame'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>[<span class="this">this</span>.<span class="variable">length</span> - <span class="number integer">1</span>];
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Lookup stack frame for the given <code>block</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Block</em>  block</p></li><li><p><strong>return</strong>: <em>Frame</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Stack</span>.<span class="variable">prototype</span>.<span class="variable">getBlockFrame</span> = <span class="keyword">function</span>(<span class="variable">block</span>){
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">length</span>; ++<span class="variable">i</span>) {
    <span class="keyword">if</span> (<span class="variable">block</span> == <span class="this">this</span>[<span class="variable">i</span>].<span class="variable">block</span>) {
      <span class="keyword">return</span> <span class="this">this</span>[<span class="variable">i</span>];
    }
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Lookup the given local variable <code>name</code>,
relative to the lexical scope of the current frame's <code>Block</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name</p></li><li><p><strong>return</strong>: <em>Node</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Stack</span>.<span class="variable">prototype</span>.<span class="variable">lookup</span> = <span class="keyword">function</span>(<span class="variable">name</span>){
  <span class="keyword">var</span> <span class="variable">val</span>
    , <span class="variable">i</span> = <span class="this">this</span>.<span class="variable">length</span>
    , <span class="variable">block</span> = <span class="this">this</span>.<span class="variable">currentFrame</span>.<span class="variable">block</span>;
  <span class="keyword">do</span> {
    <span class="keyword">var</span> <span class="variable">frame</span> = <span class="this">this</span>.<span class="variable">getBlockFrame</span>(<span class="variable">block</span>);
    <span class="keyword">if</span> (<span class="variable">val</span> = <span class="variable">frame</span>.<span class="variable">lookup</span>(<span class="variable">name</span>)) {
      <span class="keyword">return</span> <span class="variable">val</span>;
    }
  } <span class="keyword">while</span> (<span class="variable">block</span> = <span class="variable">block</span>.<span class="variable">parent</span>);
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/stack/scope.js"><a href="#">scope</a></h2></td><td>lib/stack/scope.js</td></tr><tr class="code">
<td class="docs">
<p>Initialize a new <code>Scope</code>.</p>

<ul><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Scope</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Scope</span>() {
  <span class="this">this</span>.<span class="variable">locals</span> = {};
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Add <code>Variable</code> node to the current scope.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Variable</em>  variable</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Scope</span>.<span class="variable">prototype</span>.<span class="variable">add</span> = <span class="keyword">function</span>(<span class="variable">variable</span>){
  <span class="this">this</span>.<span class="variable">locals</span>[<span class="variable">variable</span>.<span class="variable">name</span>] = <span class="variable">variable</span>.<span class="variable">val</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Lookup the given local variable <code>name</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name</p></li><li><p><strong>return</strong>: <em>Node</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Scope</span>.<span class="variable">prototype</span>.<span class="variable">lookup</span> = <span class="keyword">function</span>(<span class="variable">name</span>){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">locals</span>[<span class="variable">name</span>];
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Custom inspect.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Scope</span>.<span class="variable">prototype</span>.<span class="variable">inspect</span> = <span class="keyword">function</span>(){
  <span class="keyword">var</span> <span class="variable">keys</span> = <span class="class">Object</span>.<span class="variable">keys</span>(<span class="this">this</span>.<span class="variable">locals</span>).<span class="variable">map</span>(<span class="keyword">function</span>(<span class="variable">key</span>){ <span class="keyword">return</span> <span class="string">'@'</span> + <span class="variable">key</span>; });
  <span class="keyword">return</span> <span class="string">'[Scope'</span>
    + (<span class="variable">keys</span>.<span class="variable">length</span> ? <span class="string">' '</span> + <span class="variable">keys</span>.<span class="variable">join</span>(<span class="string">', '</span>) : <span class="string">''</span>)
    + <span class="string">']'</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/token.js"><a href="#">token</a></h2></td><td>lib/token.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">inspect</span> = <span class="variable">require</span>(<span class="string">'sys'</span>).<span class="variable">inspect</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Token</code> with the given <code>type</code> and <code>val</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  type</p></li><li><p><strong>param</strong>: <em>Mixed</em>  val</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Token</span> = <span class="variable">exports</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Token</span>(<span class="variable">type</span>, <span class="variable">val</span>) {
  <span class="this">this</span>.<span class="variable">type</span> = <span class="variable">type</span>;
  <span class="this">this</span>.<span class="variable">val</span> = <span class="variable">val</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Custom inspect.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Token</span>.<span class="variable">prototype</span>.<span class="variable">inspect</span> = <span class="keyword">function</span>(){
  <span class="keyword">var</span> <span class="variable">lineno</span> = <span class="string">' \x1b[33m'</span> + <span class="this">this</span>.<span class="variable">lineno</span> + <span class="string">'\x1b[0m'</span>
    , <span class="variable">val</span> = <span class="string">' '</span> + <span class="variable">inspect</span>(<span class="this">this</span>.<span class="variable">val</span>);
  <span class="keyword">return</span> <span class="string">'[Token '</span>
    + <span class="string">'\x1b[32m'</span> + <span class="this">this</span>.<span class="variable">type</span> + <span class="string">'\x1b[0m'</span>
    + <span class="string">'\x1b[33m'</span> + (<span class="this">this</span>.<span class="variable">val</span> ? <span class="variable">val</span> : <span class="string">''</span>) + <span class="string">'\x1b[0m'</span>
    + (<span class="string">'newline'</span> == <span class="this">this</span>.<span class="variable">type</span> ? <span class="variable">lineno</span> : <span class="string">''</span>)
    + <span class="string">']'</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return type or val.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Token</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> (<span class="variable">undefined</span> === <span class="this">this</span>.<span class="variable">val</span>
    ? <span class="this">this</span>.<span class="variable">type</span>
    : <span class="this">this</span>.<span class="variable">val</span>).<span class="variable">toString</span>();
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/visitor/compiler.js"><a href="#">compiler</a></h2></td><td>lib/visitor/compiler.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Visitor</span> = <span class="variable">require</span>(<span class="string">'./'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'../nodes'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Compiler</code> with the given <code>root</code> Node
and the following <code>options</code>.</p>

<h2>Options</h2>

<ul><li><code>compress</code>  Compress the css output, defaults to false</li></ul>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  root</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Compiler</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Compiler</span>(<span class="variable">root</span>, <span class="variable">options</span>) {
  <span class="variable">options</span> = <span class="variable">options</span> || {};
  <span class="this">this</span>.<span class="variable">compress</span> = <span class="variable">options</span>.<span class="variable">compress</span>;
  <span class="this">this</span>.<span class="variable">indents</span> = <span class="number integer">1</span>;
  <span class="class">Visitor</span>.<span class="variable">call</span>(<span class="this">this</span>, <span class="variable">root</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Visitor.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Visitor</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Compile to css, and callback <code>fn(err, css)</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Function</em>  fn</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">compile</span> = <span class="keyword">function</span>(<span class="variable">fn</span>){
  <span class="this">this</span>.<span class="variable">callback</span> = <span class="variable">fn</span>;
  <span class="this">this</span>.<span class="variable">css</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="this">this</span>.<span class="variable">root</span>);
  <span class="variable">fn</span>(<span class="keyword">null</span>, <span class="this">this</span>.<span class="variable">css</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return indentation string.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">__defineGetter__</span>(<span class="string">'indent'</span>, <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">compress</span>
     ? <span class="string">''</span>
     : <span class="keyword">new</span> <span class="class">Array</span>(<span class="this">this</span>.<span class="variable">indents</span>).<span class="variable">join</span>(<span class="string">'  '</span>);
});</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Root.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitRoot</span> = <span class="keyword">function</span>(<span class="variable">block</span>){
  <span class="keyword">var</span> <span class="variable">arr</span> = [];
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">len</span> = <span class="variable">block</span>.<span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">len</span>; ++<span class="variable">i</span>) {
    <span class="keyword">var</span> <span class="variable">node</span> = <span class="variable">block</span>.<span class="variable">nodes</span>[<span class="variable">i</span>];
    <span class="keyword">if</span> (<span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Null</span>
      || <span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Expression</span>) <span class="keyword">continue</span>;
    <span class="variable">arr</span>.<span class="variable">push</span>(<span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">node</span>));
  }
  <span class="keyword">return</span> <span class="variable">arr</span>.<span class="variable">join</span>(<span class="this">this</span>.<span class="variable">compress</span> ? <span class="string">''</span> : <span class="string">'\n'</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Block.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitBlock</span> = <span class="keyword">function</span>(<span class="variable">block</span>){
  <span class="keyword">var</span> <span class="variable">arr</span> = [<span class="this">this</span>.<span class="variable">compress</span> ? <span class="string">'{'</span> : <span class="string">' {'</span>];
  ++<span class="this">this</span>.<span class="variable">indents</span>;
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">len</span> = <span class="variable">block</span>.<span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">len</span>; ++<span class="variable">i</span>) {
    <span class="keyword">var</span> <span class="variable">node</span> = <span class="variable">block</span>.<span class="variable">nodes</span>[<span class="variable">i</span>];
    <span class="keyword">if</span> (<span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Null</span>
      || <span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Expression</span>) <span class="keyword">continue</span>;
    <span class="variable">arr</span>.<span class="variable">push</span>(<span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">node</span>));
  }
  --<span class="this">this</span>.<span class="variable">indents</span>;
  <span class="variable">arr</span>.<span class="variable">push</span>(<span class="string">'}'</span>);
  <span class="keyword">return</span> <span class="variable">arr</span>.<span class="variable">join</span>(<span class="this">this</span>.<span class="variable">compress</span> ? <span class="string">''</span> : <span class="string">'\n'</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Variable.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitVariable</span> = <span class="keyword">function</span>(<span class="variable">variable</span>){
  <span class="keyword">return</span> <span class="string">''</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Boolean.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitBoolean</span> = <span class="keyword">function</span>(<span class="variable">bool</span>){
  <span class="keyword">return</span> <span class="variable">bool</span>.<span class="variable">toString</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Color.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitColor</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="keyword">return</span> <span class="variable">color</span>.<span class="variable">toString</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit HSLA.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitHSLA</span> = <span class="keyword">function</span>(<span class="variable">hsla</span>){
  <span class="keyword">return</span> <span class="variable">hsla</span>.<span class="variable">rgba</span>.<span class="variable">toString</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Unit.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitUnit</span> = <span class="keyword">function</span>(<span class="variable">unit</span>){
  <span class="keyword">return</span> <span class="number integer">0</span> == <span class="variable">unit</span>.<span class="variable">val</span>
    ? <span class="this">this</span>.<span class="variable">compress</span>
      ? <span class="string">'0'</span>
      : <span class="variable">unit</span>.<span class="variable">toString</span>()
    : <span class="variable">unit</span>.<span class="variable">toString</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Selector.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitSelector</span> = <span class="keyword">function</span>(<span class="variable">selector</span>){
  <span class="keyword">return</span> <span class="variable">selector</span>.<span class="variable">val</span> + <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">selector</span>.<span class="variable">block</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Ident.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitIdent</span> = <span class="keyword">function</span>(<span class="variable">id</span>){
  <span class="keyword">return</span> <span class="variable">id</span>.<span class="variable">val</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit String.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitString</span> = <span class="keyword">function</span>(<span class="variable">string</span>){
  <span class="keyword">return</span> <span class="variable">string</span>.<span class="variable">toString</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Null.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitNull</span> = <span class="keyword">function</span>(<span class="variable">node</span>){
  <span class="keyword">return</span> <span class="string">''</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Call.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitCall</span> = <span class="keyword">function</span>(<span class="variable">call</span>){
  <span class="keyword">return</span> <span class="variable">call</span>.<span class="variable">name</span> + <span class="string">'('</span> + <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">call</span>.<span class="variable">args</span>) + <span class="string">')'</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Expression.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitExpression</span> = <span class="keyword">function</span>(<span class="variable">expr</span>){
  <span class="keyword">return</span> <span class="variable">expr</span>.<span class="variable">nodes</span>.<span class="variable">map</span>(<span class="keyword">function</span>(<span class="variable">node</span>){
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">node</span>);
  }, <span class="this">this</span>).<span class="variable">join</span>(<span class="variable">expr</span>.<span class="variable">isList</span>
      ? (<span class="this">this</span>.<span class="variable">compress</span> ? <span class="string">','</span> : <span class="string">', '</span>)
      : <span class="string">' '</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Property.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Compiler</span>.<span class="variable">prototype</span>.<span class="variable">visitProperty</span> = <span class="keyword">function</span>(<span class="variable">prop</span>){
  <span class="keyword">var</span> <span class="variable">self</span> = <span class="this">this</span>
    , <span class="variable">val</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">prop</span>.<span class="variable">expr</span>);
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">indent</span> + <span class="variable">prop</span>.<span class="variable">name</span>
    + (<span class="this">this</span>.<span class="variable">compress</span> ? <span class="string">':'</span> + <span class="variable">val</span> : <span class="string">': '</span> + <span class="variable">val</span>)
    + <span class="string">';'</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/visitor/evaluator/bifs.js"><a href="#">bifs</a></h2></td><td>lib/visitor/evaluator/bifs.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'../../nodes'</span>)
  , <span class="variable">utils</span> = <span class="variable">require</span>(<span class="string">'./utils'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Convert the given <code>color</code> to an <code>HSLA</code> node,
or h,s,l,a to a <code>Color</code>.</p>

<h2>Examples</h2>

<p>   hsla(10deg, 50%, 30%, 0.5)
   // =&gt; HSLA</p>

<p>   hsla(#ffcc00)
   // =&gt; HSLA</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Color | Unit</em>  h</p></li><li><p><strong>param</strong>: <em>Unit</em>  s</p></li><li><p><strong>param</strong>: <em>Unit</em>  l</p></li><li><p><strong>param</strong>: <em>Unit</em>  a</p></li><li><p><strong>return</strong>: <em>HSLA</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">hsla</span> = <span class="keyword">function</span>(<span class="variable">h</span>,<span class="variable">s</span>,<span class="variable">l</span>,<span class="variable">a</span>){
  <span class="keyword">switch</span> (<span class="variable">arguments</span>.<span class="variable">length</span>) {
    <span class="keyword">case</span> <span class="number integer">1</span>:
      <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">h</span>);
      <span class="keyword">return</span> <span class="variable">h</span>.<span class="variable">hsl</span>;
    <span class="keyword">default</span>:
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">h</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">s</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">l</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">a</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">HSLA</span>(<span class="variable">h</span>.<span class="variable">val</span>,<span class="variable">s</span>.<span class="variable">val</span>,<span class="variable">l</span>.<span class="variable">val</span>,<span class="variable">a</span>.<span class="variable">val</span>);
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Convert the given <code>color</code> to an <code>HSLA</code> node,
or h,s,l to a <code>Color</code>.</p>

<h2>Examples</h2>

<p>   hsl(10, 50, 30)
   // =&gt; HSLA</p>

<p>   hsl(#ffcc00)
   // =&gt; HSLA</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Color | Unit | HSLA</em>  h</p></li><li><p><strong>param</strong>: <em>Unit</em>  s</p></li><li><p><strong>param</strong>: <em>Unit</em>  l</p></li><li><p><strong>return</strong>: <em>HSLA</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">hsl</span> = <span class="keyword">function</span>(<span class="variable">h</span>,<span class="variable">s</span>,<span class="variable">l</span>){
  <span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">1</span>) {
    <span class="keyword">return</span> <span class="variable">exports</span>.<span class="variable">hsla</span>(<span class="variable">h</span>,<span class="variable">s</span>,<span class="variable">l</span>,<span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="number integer">1</span>));
  }
  <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">h</span>);
  <span class="keyword">return</span> <span class="variable">h</span>.<span class="variable">hsl</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return type of <code>node.</code></p>

<h2>Examples</h2>

<p>   type(12)
   // =&gt; 'unit'</p>

<p>   type(#fff)
   // =&gt; 'color'</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  node</p></li><li><p><strong>return</strong>: <em>String</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">type</span> = <span class="keyword">function</span>(<span class="variable">node</span>){
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">String</span>(<span class="variable">node</span>.<span class="variable">constructor</span>.<span class="variable">name</span>.<span class="variable">toLowerCase</span>());
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the hue of the given <code>color</code>.</p>

<h2>Examples</h2>

<p>   hue(hsl(50deg, 100%, 80%))
   // =&gt; 50deg</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>HSLA | Color</em>  color</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">hue</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">color</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="class">Math</span>.<span class="variable">round</span>(<span class="variable">color</span>.<span class="variable">hsl</span>.<span class="variable">h</span>), <span class="string">'deg'</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the saturation of the given <code>color</code>.</p>

<h2>Examples</h2>

<p>   saturation(hsl(50deg, 100%, 80%))
   // =&gt; 100%</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>HSLA | Color</em>  color</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">saturation</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">color</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="class">Math</span>.<span class="variable">round</span>(<span class="variable">color</span>.<span class="variable">hsl</span>.<span class="variable">s</span>), <span class="string">'%'</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the lightness of the given <code>color</code>.</p>

<h2>Examples</h2>

<p>   lightness(hsl(50def, 100%, 80%))
   // =&gt; 80%</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>HSLA | Color</em>  color</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">lightness</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">color</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="class">Math</span>.<span class="variable">round</span>(<span class="variable">color</span>.<span class="variable">hsl</span>.<span class="variable">l</span>), <span class="string">'%'</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the alpha component of the given <code>color</code>.</p>

<h2>Examples</h2>

<p>  alpha(#fff)
  // =&gt; 1</p>

<p>  alpha(rgba(0,0,0,0.3))
  // =&gt; 0.3</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Color | HSLA</em>  color</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">alpha</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">color</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">color</span>.<span class="variable">rgba</span>.<span class="variable">a</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the red component of the given <code>color</code>.</p>

<h2>Examples</h2>

<p>   red(#c00)
   // =&gt; 204</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Color | HSLA</em>  color</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">red</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">color</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">color</span>.<span class="variable">rgba</span>.<span class="variable">r</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the green component of the given <code>color</code>.</p>

<h2>Examples</h2>

<p>   green(#0c0)
   // =&gt; 204</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Color | HSLA</em>  color</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">green</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">color</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">color</span>.<span class="variable">rgba</span>.<span class="variable">g</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the blue component of the given <code>color</code>.</p>

<h2>Examples</h2>

<p>   blue(#00c)
   // =&gt; 204</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Color | HSLA</em>  color</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">blue</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">color</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">color</span>.<span class="variable">rgba</span>.<span class="variable">b</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return a <code>Color</code> from the r,g,b,a channels.</p>

<h2>Examples</h2>

<p>   rgba(255,0,0,0.5)
   // =&gt; rgba(255,0,0,0.5)</p>

<p>   rgba(255,0,0,1)
   // =&gt; #ff0000</p>

<p>   rgba(#ffcc00, 0.5)
   // rgba(255,204,0,0.5)</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Unit | Color | HSLA</em>  r</p></li><li><p><strong>param</strong>: <em>Unit</em>  g</p></li><li><p><strong>param</strong>: <em>Unit</em>  b</p></li><li><p><strong>param</strong>: <em>Unit</em>  a</p></li><li><p><strong>return</strong>: <em>Color</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">rgba</span> = <span class="keyword">function</span>(<span class="variable">r</span>,<span class="variable">g</span>,<span class="variable">b</span>,<span class="variable">a</span>){
  <span class="keyword">switch</span> (<span class="variable">arguments</span>.<span class="variable">length</span>) {
    <span class="keyword">case</span> <span class="number integer">1</span>:
      <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">r</span>);
      <span class="keyword">var</span> <span class="variable">color</span> = <span class="variable">r</span>.<span class="variable">rgba</span>;
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(
          <span class="variable">color</span>.<span class="variable">r</span>
        , <span class="variable">color</span>.<span class="variable">g</span>
        , <span class="variable">color</span>.<span class="variable">b</span>
        , <span class="variable">color</span>.<span class="variable">a</span>);
    <span class="keyword">case</span> <span class="number integer">2</span>:
      <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">r</span>);
      <span class="keyword">var</span> <span class="variable">color</span> = <span class="variable">r</span>.<span class="variable">rgba</span>;
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">g</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(
          <span class="variable">color</span>.<span class="variable">r</span>
        , <span class="variable">color</span>.<span class="variable">g</span>
        , <span class="variable">color</span>.<span class="variable">b</span>
        , <span class="variable">g</span>.<span class="variable">val</span>);
    <span class="keyword">default</span>:
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">r</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">g</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">b</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">a</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(
          <span class="variable">r</span>.<span class="variable">val</span>
        , <span class="variable">g</span>.<span class="variable">val</span>
        , <span class="variable">b</span>.<span class="variable">val</span>
        , <span class="variable">a</span>.<span class="variable">val</span>);
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return a <code>Color</code> from the r,g,b channels.</p>

<h2>Examples</h2>

<p>   rgb(255,204,0)
   // =&gt; #ffcc00</p>

<p>   rgb(#fff)
   // =&gt; #fff</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Unit | Color | HSLA</em>  r</p></li><li><p><strong>param</strong>: <em>Unit</em>  g</p></li><li><p><strong>param</strong>: <em>Unit</em>  b</p></li><li><p><strong>return</strong>: <em>Color</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">rgb</span> = <span class="keyword">function</span>(<span class="variable">r</span>,<span class="variable">g</span>,<span class="variable">b</span>){
  <span class="keyword">switch</span> (<span class="variable">arguments</span>.<span class="variable">length</span>) {
    <span class="keyword">case</span> <span class="number integer">1</span>:
      <span class="variable">utils</span>.<span class="variable">assertColor</span>(<span class="variable">r</span>);
      <span class="keyword">var</span> <span class="variable">color</span> = <span class="variable">r</span>.<span class="variable">rgba</span>;
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(
          <span class="variable">color</span>.<span class="variable">r</span>
        , <span class="variable">color</span>.<span class="variable">g</span>
        , <span class="variable">color</span>.<span class="variable">b</span>
        , <span class="number integer">1</span>);
    <span class="keyword">default</span>:
      <span class="keyword">return</span> <span class="variable">exports</span>.<span class="variable">rgba</span>(<span class="variable">r</span>,<span class="variable">g</span>,<span class="variable">b</span>,<span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="number integer">1</span>));
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Unquote the given <code>str</code>.</p>

<h2>Examples</h2>

<p>   unquote("sans-serif")
   // =&gt; sans-serif</p>

<p>   unquote(sans-serif)
   // =&gt; sans-serif</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String | Ident</em>  str</p></li><li><p><strong>return</strong>: <em>Ident</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">unquote</span> = <span class="keyword">function</span>(<span class="variable">str</span>){
  <span class="keyword">if</span> (<span class="variable">str</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">String</span>) {
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Ident</span>(<span class="variable">str</span>.<span class="variable">val</span>);
  }
  <span class="keyword">if</span> (<span class="variable">str</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Ident</span>) {
    <span class="keyword">return</span> <span class="variable">str</span>;
  }
  <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">str</span>, <span class="variable">nodes</span>.<span class="class">String</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Absolute value of <code>n</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Unit</em>  n</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">abs</span> = <span class="keyword">function</span>(<span class="variable">n</span>){
  <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">n</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="class">Math</span>.<span class="variable">abs</span>(<span class="variable">n</span>.<span class="variable">val</span>), <span class="variable">n</span>.<span class="variable">type</span>);
}</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Nearest integer above <code>n</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Unit</em>  n</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">ceil</span> = <span class="keyword">function</span>(<span class="variable">n</span>){
  <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">n</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="class">Math</span>.<span class="variable">ceil</span>(<span class="variable">n</span>.<span class="variable">val</span>), <span class="variable">n</span>.<span class="variable">type</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Nearest integer below <code>n</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Unit</em>  n</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">floor</span> = <span class="keyword">function</span>(<span class="variable">n</span>){
  <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">n</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="class">Math</span>.<span class="variable">floor</span>(<span class="variable">n</span>.<span class="variable">val</span>), <span class="variable">n</span>.<span class="variable">type</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Min of <code>a</code> and <code>b</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Unit</em>  a</p></li><li><p><strong>param</strong>: <em>Unit</em>  b</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">min</span> = <span class="keyword">function</span>(<span class="variable">a</span>, <span class="variable">b</span>){
  <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">a</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
  <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">b</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
  <span class="keyword">return</span> <span class="variable">a</span>.<span class="variable">val</span> &<span class="variable">lt</span>; <span class="variable">b</span>.<span class="variable">val</span> ? <span class="variable">a</span> : <span class="variable">b</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Max of <code>a</code> and <code>b</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Unit</em>  a</p></li><li><p><strong>param</strong>: <em>Unit</em>  b</p></li><li><p><strong>return</strong>: <em>Unit</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">max</span> = <span class="keyword">function</span>(<span class="variable">a</span>, <span class="variable">b</span>){
  <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">a</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
  <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">b</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);
  <span class="keyword">return</span> <span class="variable">a</span>.<span class="variable">val</span> &<span class="variable">gt</span>; <span class="variable">b</span>.<span class="variable">val</span> ? <span class="variable">a</span> : <span class="variable">b</span>;
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/visitor/evaluator/index.js"><a href="#">index</a></h2></td><td>lib/visitor/evaluator/index.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Visitor</span> = <span class="variable">require</span>(<span class="string">'../'</span>)
  , <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'../../nodes'</span>)
  , <span class="class">Stack</span> = <span class="variable">require</span>(<span class="string">'../../stack'</span>)
  , <span class="class">Frame</span> = <span class="variable">require</span>(<span class="string">'../../stack/frame'</span>)
  , <span class="class">Scope</span> = <span class="variable">require</span>(<span class="string">'../../stack/scope'</span>)
  , <span class="variable">operations</span> = <span class="variable">require</span>(<span class="string">'./operations'</span>)
  , <span class="variable">utils</span> = <span class="variable">require</span>(<span class="string">'./utils'</span>)
  , <span class="variable">bifs</span> = <span class="variable">require</span>(<span class="string">'./bifs'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Evaluator</code> with the given <code>root</code> Node
and the following <code>options</code>.</p>

<h2>Options</h2>

<ul><li><code>compress</code>  Compress the css output, defaults to false</li></ul>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  root</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Evaluator</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Evaluator</span>(<span class="variable">root</span>, <span class="variable">options</span>) {
  <span class="variable">options</span> = <span class="variable">options</span> || {};
  <span class="class">Visitor</span>.<span class="variable">call</span>(<span class="this">this</span>, <span class="variable">root</span>);
  <span class="this">this</span>.<span class="variable">stack</span> = <span class="keyword">new</span> <span class="class">Stack</span>;
  <span class="this">this</span>.<span class="variable">stack</span>.<span class="variable">push</span>(<span class="this">this</span>.<span class="variable">global</span> = <span class="keyword">new</span> <span class="class">Frame</span>(<span class="variable">root</span>));
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Visitor.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Visitor</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Evaluate the tree.</p>

<h2></h2>

<ul><li><p><strong>return</strong>: <em>Node</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">evaluate</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">visit</span>(<span class="this">this</span>.<span class="variable">root</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Root.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitRoot</span> = <span class="keyword">function</span>(<span class="variable">block</span>){
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">len</span> = <span class="variable">block</span>.<span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">len</span>; ++<span class="variable">i</span>) {
    <span class="variable">block</span>.<span class="variable">nodes</span>[<span class="variable">i</span>] = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">block</span>.<span class="variable">nodes</span>[<span class="variable">i</span>]);
  }
  <span class="keyword">return</span> <span class="variable">block</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Block.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitBlock</span> = <span class="keyword">function</span>(<span class="variable">block</span>){
  <span class="this">this</span>.<span class="variable">stack</span>.<span class="variable">push</span>(<span class="keyword">new</span> <span class="class">Frame</span>(<span class="variable">block</span>));
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">len</span> = <span class="variable">block</span>.<span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">len</span>; ++<span class="variable">i</span>) {
    <span class="variable">block</span>.<span class="variable">nodes</span>[<span class="variable">i</span>] = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">block</span>.<span class="variable">nodes</span>[<span class="variable">i</span>]);
  }
  <span class="this">this</span>.<span class="variable">stack</span>.<span class="variable">pop</span>();
  <span class="keyword">return</span> <span class="variable">block</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Color.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitColor</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="keyword">return</span> <span class="variable">color</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Boolean.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitBoolean</span> = <span class="keyword">function</span>(<span class="variable">bool</span>){
  <span class="keyword">return</span> <span class="variable">bool</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Unit.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitUnit</span> = <span class="keyword">function</span>(<span class="variable">unit</span>){
  <span class="keyword">return</span> <span class="variable">unit</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Ident.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitIdent</span> = <span class="keyword">function</span>(<span class="variable">id</span>){
  <span class="keyword">return</span> <span class="variable">id</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit String.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitString</span> = <span class="keyword">function</span>(<span class="variable">string</span>){
  <span class="keyword">return</span> <span class="variable">string</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Null.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitNull</span> = <span class="keyword">function</span>(<span class="variable">node</span>){
  <span class="keyword">return</span> <span class="variable">node</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Function.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitFunction</span> = <span class="keyword">function</span>(<span class="variable">fn</span>){
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Null</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Selector.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitSelector</span> = <span class="keyword">function</span>(<span class="variable">selector</span>){
  <span class="variable">selector</span>.<span class="variable">block</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">selector</span>.<span class="variable">block</span>);
  <span class="keyword">return</span> <span class="variable">selector</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Call.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitCall</span> = <span class="keyword">function</span>(<span class="variable">call</span>){
  <span class="comment">// TODO: refactor, most most into ./util</span>
  <span class="keyword">var</span> <span class="variable">fn</span> = <span class="this">this</span>.<span class="variable">stack</span>.<span class="variable">lookup</span>(<span class="variable">call</span>.<span class="variable">name</span>) || <span class="variable">bifs</span>[<span class="variable">call</span>.<span class="variable">name</span>];

  <span class="comment">// Undefined function, render literal css</span>
  <span class="keyword">if</span> (!<span class="variable">fn</span>) <span class="keyword">return</span> <span class="variable">call</span>;

  <span class="keyword">var</span> <span class="variable">ret</span>, <span class="variable">body</span>
    , <span class="variable">params</span> = <span class="variable">fn</span>.<span class="variable">params</span>
    , <span class="variable">stack</span> = <span class="this">this</span>.<span class="variable">stack</span>;

  <span class="this">this</span>.<span class="variable">lookup</span> = <span class="variable">true</span>;
  <span class="keyword">var</span> <span class="variable">args</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">call</span>.<span class="variable">args</span>);
  <span class="this">this</span>.<span class="variable">lookup</span> = <span class="variable">false</span>;

  <span class="comment">// Built-in</span>
  <span class="keyword">if</span> (<span class="string">'function'</span> == <span class="keyword">typeof</span> <span class="variable">fn</span>) {
    <span class="variable">args</span> = <span class="variable">args</span>.<span class="variable">nodes</span>.<span class="variable">map</span>(<span class="keyword">function</span>(<span class="variable">node</span>){
      <span class="keyword">return</span> <span class="variable">node</span>.<span class="variable">first</span>;
    });
    <span class="variable">body</span> = <span class="variable">fn</span>.<span class="variable">apply</span>(<span class="this">this</span>, <span class="variable">args</span>);
    <span class="keyword">if</span> (!(<span class="variable">body</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Expression</span>)) {
      <span class="keyword">var</span> <span class="variable">expr</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Expression</span>;
      <span class="variable">expr</span>.<span class="variable">push</span>(<span class="variable">body</span>);
      <span class="variable">body</span> = <span class="variable">expr</span>;
    }
  } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">fn</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Function</span>) {
    <span class="comment">// Inject arguments as locals</span>
    <span class="variable">stack</span>.<span class="variable">push</span>(<span class="keyword">new</span> <span class="class">Frame</span>(<span class="variable">fn</span>.<span class="variable">block</span>));
    <span class="variable">params</span>.<span class="variable">nodes</span>.<span class="variable">forEach</span>(<span class="keyword">function</span>(<span class="variable">node</span>, <span class="variable">i</span>){
      <span class="variable">node</span>.<span class="variable">val</span> = <span class="variable">args</span>.<span class="variable">nodes</span>[<span class="variable">i</span>] || <span class="variable">node</span>.<span class="variable">val</span>;
      <span class="keyword">if</span> (<span class="variable">node</span>.<span class="variable">val</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Null</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'argument '</span> + <span class="variable">node</span> + <span class="string">' required for '</span> + <span class="variable">fn</span>);
      }
      <span class="variable">stack</span>.<span class="variable">currentFrame</span>.<span class="variable">scope</span>.<span class="variable">add</span>(<span class="variable">node</span>);
    });

    <span class="comment">// Evaluate</span>
    <span class="this">this</span>.<span class="variable">lookup</span> = <span class="variable">true</span>;
    <span class="variable">body</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">fn</span>.<span class="variable">block</span>);
    <span class="this">this</span>.<span class="variable">lookup</span> = <span class="variable">false</span>;
    <span class="variable">stack</span>.<span class="variable">pop</span>();
  } <span class="keyword">else</span> {
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'cannot call '</span> + <span class="variable">fn</span>.<span class="variable">first</span>);
  }

  <span class="comment">// Return</span>
  <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">isProperty</span>) {
    <span class="variable">ret</span> = <span class="variable">body</span>.<span class="variable">nodes</span>[<span class="variable">body</span>.<span class="variable">nodes</span>.<span class="variable">length</span> - <span class="number integer">1</span>];
  <span class="comment">// Mixin</span>
  } <span class="keyword">else</span> {
    <span class="variable">body</span>.<span class="variable">nodes</span>.<span class="variable">forEach</span>(<span class="keyword">function</span>(<span class="variable">node</span>){
      <span class="variable">stack</span>.<span class="variable">currentFrame</span>.<span class="variable">block</span>.<span class="variable">nodes</span>.<span class="variable">push</span>(<span class="variable">node</span>);
    });
    <span class="variable">ret</span> = <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Null</span>;
  }

  <span class="keyword">return</span> <span class="variable">ret</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Variable.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitVariable</span> = <span class="keyword">function</span>(<span class="variable">variable</span>){
  <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">lookup</span>) {
    <span class="keyword">var</span> <span class="variable">val</span> = <span class="this">this</span>.<span class="variable">stack</span>.<span class="variable">lookup</span>(<span class="variable">variable</span>.<span class="variable">name</span>);
    <span class="keyword">if</span> (!<span class="variable">val</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'undefined variable '</span> + <span class="variable">variable</span>);
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">val</span>);
  } <span class="keyword">else</span> {
    <span class="this">this</span>.<span class="variable">stack</span>.<span class="variable">currentFrame</span>.<span class="variable">scope</span>.<span class="variable">add</span>(<span class="variable">variable</span>);
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Null</span>;
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit BinOp.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitBinOp</span> = <span class="keyword">function</span>(<span class="variable">binop</span>){
  <span class="comment">// Special-case &quot;is defined&quot; psuedo binop</span>
  <span class="comment">// TODO: unary</span>
  <span class="keyword">if</span> (<span class="string">'is defined'</span> == <span class="variable">binop</span>.<span class="variable">op</span>) {
    <span class="keyword">if</span> (<span class="variable">binop</span>.<span class="variable">left</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Variable</span>) {
      <span class="keyword">var</span> <span class="variable">left</span> = <span class="this">this</span>.<span class="variable">stack</span>.<span class="variable">lookup</span>(<span class="variable">binop</span>.<span class="variable">left</span>.<span class="variable">name</span>);
      <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>);
    } <span class="keyword">else</span> {
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'invalid &quot;is defined&quot; check on non-variable'</span>);
    }
  }

  <span class="comment">// Visit operands</span>
  <span class="keyword">var</span> <span class="variable">op</span> = <span class="variable">binop</span>.<span class="variable">op</span>
    , <span class="variable">left</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">binop</span>.<span class="variable">left</span>).<span class="variable">first</span>
    , <span class="variable">right</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">binop</span>.<span class="variable">right</span>).<span class="variable">first</span>;

  <span class="comment">// Discover operation type</span>
  <span class="keyword">var</span> <span class="variable">type</span> = <span class="variable">left</span>.<span class="variable">constructor</span>.<span class="variable">name</span>.<span class="variable">toLowerCase</span>()
    , <span class="variable">ops</span> = <span class="variable">operations</span>[<span class="variable">type</span>]
    , <span class="variable">fn</span> = <span class="variable">ops</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; (<span class="variable">ops</span>[<span class="variable">op</span>] || <span class="variable">operations</span>.<span class="variable">all</span>[<span class="variable">op</span>]);

  <span class="keyword">if</span> (!<span class="variable">ops</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'cannot operate on '</span> + <span class="variable">type</span>);
  <span class="keyword">if</span> (!<span class="variable">fn</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'invalid operation '</span> + <span class="variable">op</span> + <span class="string">' on '</span> + <span class="variable">type</span>);

  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">fn</span>(<span class="variable">left</span>, <span class="variable">right</span>));
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit UnaryOp.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitUnaryOp</span> = <span class="keyword">function</span>(<span class="variable">unary</span>){
  <span class="keyword">var</span> <span class="variable">op</span> = <span class="variable">unary</span>.<span class="variable">op</span>
    , <span class="variable">node</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">unary</span>.<span class="variable">expr</span>).<span class="variable">first</span>;

  <span class="keyword">if</span> (<span class="string">'!'</span> != <span class="variable">op</span>) <span class="variable">utils</span>.<span class="variable">assertType</span>(<span class="variable">node</span>, <span class="variable">nodes</span>.<span class="class">Unit</span>);

  <span class="keyword">switch</span> (<span class="variable">op</span>) {
    <span class="keyword">case</span> <span class="string">'-'</span>:
      <span class="variable">node</span>.<span class="variable">val</span> = -<span class="variable">node</span>.<span class="variable">val</span>;
      <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">'+'</span>:
      <span class="variable">node</span>.<span class="variable">val</span> = +<span class="variable">node</span>.<span class="variable">val</span>;
      <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">'~'</span>:
      <span class="variable">node</span>.<span class="variable">val</span> = ~<span class="variable">node</span>.<span class="variable">val</span>;
      <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">'!'</span>:
      <span class="keyword">return</span> <span class="variable">node</span>.<span class="variable">toBoolean</span>().<span class="variable">negate</span>();
  }
  
  <span class="keyword">return</span> <span class="variable">node</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit TernaryOp.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitTernary</span> = <span class="keyword">function</span>(<span class="variable">ternary</span>){
  <span class="keyword">var</span> <span class="variable">ok</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">ternary</span>.<span class="variable">cond</span>).<span class="variable">toBoolean</span>();
  <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="variable">true</span> == <span class="variable">ok</span>
    ? <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">ternary</span>.<span class="variable">trueExpr</span>)
    : <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">ternary</span>.<span class="variable">falseExpr</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Expression.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitExpression</span> = <span class="keyword">function</span>(<span class="variable">expr</span>){
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">len</span> = <span class="variable">expr</span>.<span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">len</span>; ++<span class="variable">i</span>) {
    <span class="variable">expr</span>.<span class="variable">nodes</span>[<span class="variable">i</span>] = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">expr</span>.<span class="variable">nodes</span>[<span class="variable">i</span>]);
  }
  <span class="keyword">return</span> <span class="variable">expr</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Property.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Evaluator</span>.<span class="variable">prototype</span>.<span class="variable">visitProperty</span> = <span class="keyword">function</span>(<span class="variable">prop</span>){
  <span class="this">this</span>.<span class="variable">lookup</span> = <span class="variable">true</span>;
  <span class="this">this</span>.<span class="variable">isProperty</span> = <span class="variable">true</span>;
  <span class="variable">prop</span>.<span class="variable">expr</span> = <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">prop</span>.<span class="variable">expr</span>);
  <span class="this">this</span>.<span class="variable">isProperty</span> = <span class="variable">false</span>;
  <span class="this">this</span>.<span class="variable">lookup</span> = <span class="variable">false</span>;
  <span class="keyword">return</span> <span class="variable">prop</span>;
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/visitor/evaluator/operations.js"><a href="#">operations</a></h2></td><td>lib/visitor/evaluator/operations.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'../../nodes'</span>)
  , <span class="variable">utils</span> = <span class="variable">require</span>(<span class="string">'./utils'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Global operations.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">all</span> = {
  <span class="string">'is a'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">var</span> <span class="variable">val</span> = <span class="variable">right</span>.<span class="variable">val</span>
      , <span class="variable">name</span> = <span class="variable">left</span>.<span class="variable">constructor</span>.<span class="variable">name</span>;
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">val</span> == <span class="variable">name</span> || <span class="variable">val</span> == <span class="variable">name</span>.<span class="variable">toLowerCase</span>());
  },
  
  <span class="string">'=='</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">val</span> == <span class="variable">right</span>.<span class="variable">val</span>);
  },
  
  <span class="string">'&gt;'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">val</span> &<span class="variable">gt</span>; <span class="variable">right</span>.<span class="variable">val</span>);
  },
  
  <span class="string">'&lt;'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">val</span> &<span class="variable">lt</span>; <span class="variable">right</span>.<span class="variable">val</span>);
  },
  
  <span class="string">'&gt;='</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">val</span> &<span class="variable">gt</span>;= <span class="variable">right</span>.<span class="variable">val</span>);
  },
  
  <span class="string">'&lt;='</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">val</span> &<span class="variable">lt</span>;= <span class="variable">right</span>.<span class="variable">val</span>);
  },

  <span class="string">'||'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="variable">true</span> == <span class="variable">left</span>.<span class="variable">toBoolean</span>()
      ? <span class="variable">left</span>
      : <span class="variable">right</span>;
  },
  
  <span class="string">'&amp;&amp;'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">var</span> <span class="variable">a</span> = <span class="variable">left</span>.<span class="variable">toBoolean</span>()
      , <span class="variable">b</span> = <span class="variable">right</span>.<span class="variable">toBoolean</span>();
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="variable">true</span> == <span class="variable">a</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">nodes</span>.<span class="variable">true</span> == <span class="variable">b</span>
      ? <span class="variable">right</span>
      : <span class="variable">nodes</span>.<span class="variable">false</span> == <span class="variable">a</span>
        ? <span class="variable">left</span>
        : <span class="variable">right</span>;
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Unit operations.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">unit</span> = {
  <span class="string">'+'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">left</span>.<span class="variable">val</span> + <span class="variable">right</span>.<span class="variable">val</span>, <span class="variable">left</span>.<span class="variable">type</span> || <span class="variable">right</span>.<span class="variable">type</span>);
  },

  <span class="string">'-'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">left</span>.<span class="variable">val</span> - <span class="variable">right</span>.<span class="variable">val</span>, <span class="variable">left</span>.<span class="variable">type</span> || <span class="variable">right</span>.<span class="variable">type</span>);
  },

  <span class="string">'/'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">left</span>.<span class="variable">val</span> / <span class="variable">right</span>.<span class="variable">val</span>, <span class="variable">left</span>.<span class="variable">type</span> || <span class="variable">right</span>.<span class="variable">type</span>);
  },

  <span class="string">'*'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">left</span>.<span class="variable">val</span> * <span class="variable">right</span>.<span class="variable">val</span>, <span class="variable">left</span>.<span class="variable">type</span> || <span class="variable">right</span>.<span class="variable">type</span>);
  },
  
  <span class="string">'%'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="variable">left</span>.<span class="variable">val</span> % <span class="variable">right</span>.<span class="variable">val</span>, <span class="variable">left</span>.<span class="variable">type</span> || <span class="variable">right</span>.<span class="variable">type</span>);
  },
  
  <span class="string">'**'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Unit</span>(<span class="class">Math</span>.<span class="variable">pow</span>(<span class="variable">left</span>.<span class="variable">val</span>, <span class="variable">right</span>.<span class="variable">val</span>), <span class="variable">left</span>.<span class="variable">type</span> || <span class="variable">right</span>.<span class="variable">type</span>);
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>String operations.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">string</span> = {
  <span class="string">'+'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">String</span>(<span class="variable">left</span>.<span class="variable">val</span> + <span class="variable">right</span>.<span class="variable">val</span>);
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Color operations.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">color</span> = {
  <span class="string">'+'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="variable">right</span> = <span class="variable">utils</span>.<span class="variable">toColor</span>(<span class="variable">right</span>);
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(
        <span class="variable">left</span>.<span class="variable">r</span> + <span class="variable">right</span>.<span class="variable">r</span>
      , <span class="variable">left</span>.<span class="variable">g</span> + <span class="variable">right</span>.<span class="variable">g</span>
      , <span class="variable">left</span>.<span class="variable">b</span> + <span class="variable">right</span>.<span class="variable">b</span>
      , <span class="number integer">1</span> == <span class="variable">right</span>.<span class="variable">a</span> ? <span class="variable">left</span>.<span class="variable">a</span> : (<span class="variable">left</span>.<span class="variable">a</span> + <span class="variable">right</span>.<span class="variable">a</span>)
      );
  },
  
  <span class="string">'-'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="variable">right</span> = <span class="variable">utils</span>.<span class="variable">toColor</span>(<span class="variable">right</span>);
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(
        <span class="variable">left</span>.<span class="variable">r</span> - <span class="variable">right</span>.<span class="variable">r</span>
      , <span class="variable">left</span>.<span class="variable">g</span> - <span class="variable">right</span>.<span class="variable">g</span>
      , <span class="variable">left</span>.<span class="variable">b</span> - <span class="variable">right</span>.<span class="variable">b</span>
      , <span class="number integer">1</span> == <span class="variable">right</span>.<span class="variable">a</span> ? <span class="variable">left</span>.<span class="variable">a</span> : (<span class="variable">left</span>.<span class="variable">a</span> - <span class="variable">right</span>.<span class="variable">a</span>)
      );
  },
  
  <span class="string">'*'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="variable">right</span> = <span class="variable">utils</span>.<span class="variable">toColor</span>(<span class="variable">right</span>);
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(
        <span class="variable">left</span>.<span class="variable">r</span> * <span class="variable">right</span>.<span class="variable">r</span>
      , <span class="variable">left</span>.<span class="variable">g</span> * <span class="variable">right</span>.<span class="variable">g</span>
      , <span class="variable">left</span>.<span class="variable">b</span> * <span class="variable">right</span>.<span class="variable">b</span>
      , <span class="variable">left</span>.<span class="variable">a</span> * <span class="variable">right</span>.<span class="variable">a</span>
      );      
  },
  
  <span class="string">'/'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="variable">right</span> = <span class="variable">utils</span>.<span class="variable">toColor</span>(<span class="variable">right</span>);
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(
        <span class="variable">left</span>.<span class="variable">r</span> / <span class="variable">right</span>.<span class="variable">r</span>
      , <span class="variable">left</span>.<span class="variable">g</span> / <span class="variable">right</span>.<span class="variable">g</span>
      , <span class="variable">left</span>.<span class="variable">b</span> / <span class="variable">right</span>.<span class="variable">b</span>
      , <span class="variable">left</span>.<span class="variable">a</span> / <span class="variable">right</span>.<span class="variable">a</span>
      );      
  },
  
  <span class="string">'=='</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">toString</span>() == <span class="variable">right</span>.<span class="variable">toString</span>());
  },
  
  <span class="string">'&gt;'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">toString</span>() &<span class="variable">gt</span>; <span class="variable">right</span>.<span class="variable">toString</span>());
  },
  
  <span class="string">'&lt;'</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">toString</span>() &<span class="variable">lt</span>; <span class="variable">right</span>.<span class="variable">toString</span>());
  },
  
  <span class="string">'&gt;='</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">toString</span>() &<span class="variable">gt</span>;= <span class="variable">right</span>.<span class="variable">toString</span>());
  },
  
  <span class="string">'&lt;='</span>: <span class="keyword">function</span>(<span class="variable">left</span>, <span class="variable">right</span>){
    <span class="keyword">return</span> <span class="variable">nodes</span>.<span class="class">Boolean</span>(<span class="variable">left</span>.<span class="variable">toString</span>() &<span class="variable">lt</span>;= <span class="variable">right</span>.<span class="variable">toString</span>());
  }
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Ident operations.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">ident</span> = {};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Boolean operations.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">boolean</span> = {};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/visitor/evaluator/utils.js"><a href="#">utils</a></h2></td><td>lib/visitor/evaluator/utils.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">nodes</span> = <span class="variable">require</span>(<span class="string">'../../nodes'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Assert that <code>node</code> is of the given <code>type</code>, or throw.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  node</p></li><li><p><strong>param</strong>: <em>Function</em>  type</p></li><li><p><strong>param</strong>: <em>String</em>  msg</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">assertType</span> = <span class="keyword">function</span>(<span class="variable">node</span>, <span class="variable">type</span>, <span class="variable">msg</span>){
  <span class="keyword">if</span> (<span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">type</span>) <span class="keyword">return</span>;
  <span class="keyword">var</span> <span class="variable">actual</span> = <span class="variable">node</span>.<span class="variable">constructor</span>.<span class="variable">name</span>;
  <span class="variable">msg</span> = <span class="variable">msg</span> || <span class="string">'expected '</span> + <span class="variable">type</span>.<span class="variable">name</span> + <span class="string">', but got '</span> + <span class="variable">actual</span> + <span class="string">':'</span> + <span class="variable">node</span>;
  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'TypeError: '</span> + <span class="variable">msg</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Assert that <code>node</code> is a <code>Color</code> or <code>HSLA</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  node</p></li><li><p><strong>param</strong>: <em>String</em>  msg</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">assertColor</span> = <span class="keyword">function</span>(<span class="variable">node</span>, <span class="variable">msg</span>){
  <span class="keyword">if</span> (<span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Color</span>) <span class="keyword">return</span>;
  <span class="keyword">if</span> (<span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">HSLA</span>) <span class="keyword">return</span>;
  <span class="keyword">var</span> <span class="variable">actual</span> = <span class="variable">node</span>.<span class="variable">constructor</span>.<span class="variable">name</span>;
  <span class="variable">msg</span> = <span class="variable">msg</span> || <span class="string">'expected Color or HSLA, but got '</span> + <span class="variable">actual</span> + <span class="string">':'</span> + <span class="variable">node</span>;
  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'TypeError: '</span> + <span class="variable">msg</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Coerce <code>node</code> into a <code>Color</code> or throw.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  node</p></li><li><p><strong>return</strong>: <em>Color</em> </p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>.<span class="variable">toColor</span> = <span class="keyword">function</span>(<span class="variable">node</span>) {
  <span class="keyword">if</span> (<span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Color</span>) <span class="keyword">return</span> <span class="variable">node</span>;
  <span class="keyword">if</span> (<span class="variable">node</span> <span class="variable">instanceof</span> <span class="variable">nodes</span>.<span class="class">Unit</span>) {
    <span class="keyword">var</span> <span class="variable">n</span> = <span class="variable">node</span>.<span class="variable">val</span>;
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">nodes</span>.<span class="class">Color</span>(<span class="variable">n</span>,<span class="variable">n</span>,<span class="variable">n</span>,<span class="number integer">1</span>);
  }
  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'unable to coerce '</span> + <span class="variable">node</span> + <span class="string">' into a Color'</span>);
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/visitor/index.js"><a href="#">index</a></h2></td><td>lib/visitor/index.js</td></tr><tr class="code">
<td class="docs">
<p>Initialize a new <code>Visitor</code> with the given <code>root</code> Node.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  root</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Visitor</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Visitor</span>(<span class="variable">root</span>) {
  <span class="this">this</span>.<span class="variable">root</span> = <span class="variable">root</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit the given <code>node</code> or an array of nodes.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node | Array</em>  node</p></li><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Visitor</span>.<span class="variable">prototype</span>.<span class="variable">visit</span> = <span class="keyword">function</span>(<span class="variable">node</span>, <span class="variable">fn</span>){
  <span class="keyword">var</span> <span class="variable">method</span> = <span class="string">'visit'</span> + <span class="variable">node</span>.<span class="variable">constructor</span>.<span class="variable">name</span>
    , <span class="variable">cons</span> = <span class="this">this</span>.<span class="variable">constructor</span>.<span class="variable">name</span>;
  <span class="keyword">if</span> (!<span class="this">this</span>[<span class="variable">method</span>]) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="variable">cons</span> + <span class="string">' visitor method '</span> + <span class="variable">method</span> + <span class="string">'() not defined'</span>);
  <span class="keyword">return</span> <span class="this">this</span>[<span class="variable">method</span>](<span class="variable">node</span>);
};

</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="lib/visitor/serializer.js"><a href="#">serializer</a></h2></td><td>lib/visitor/serializer.js</td></tr><tr class="code">
<td class="docs">
<p>Module dependencies.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Visitor</span> = <span class="variable">require</span>(<span class="string">'./'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Initialize a new <code>Serializer</code> with the given <code>root</code> Node.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Node</em>  root</p></li><li><p><strong>api</strong>: <em>private</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="class">Serializer</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="class">Serializer</span>(<span class="variable">root</span>) {
  <span class="class">Visitor</span>.<span class="variable">call</span>(<span class="this">this</span>, <span class="variable">root</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Inherit from <code>Visitor.prototype</code>.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">__proto__</span> = <span class="class">Visitor</span>.<span class="variable">prototype</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return serialized nodes.</p>

<ul><li><p><strong>api</strong>: <em>public</em></p></li></ul>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">serialize</span> = <span class="keyword">function</span>(){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">visit</span>(<span class="this">this</span>.<span class="variable">root</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Root.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitRoot</span> = <span class="keyword">function</span>(<span class="variable">block</span>){
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">visitBlock</span>(<span class="variable">block</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Block.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitBlock</span> = <span class="keyword">function</span>(<span class="variable">block</span>){
  <span class="keyword">var</span> <span class="variable">arr</span> = [];
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">len</span> = <span class="variable">block</span>.<span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">len</span>; ++<span class="variable">i</span>) {
    <span class="variable">arr</span>.<span class="variable">push</span>(<span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">block</span>.<span class="variable">nodes</span>[<span class="variable">i</span>]));
  }
  <span class="keyword">return</span> <span class="variable">arr</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Variable.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitVariable</span> = <span class="keyword">function</span>(<span class="variable">variable</span>){
  <span class="keyword">return</span> {
      <span class="variable">type</span>: <span class="string">'variable'</span>
    , <span class="variable">name</span>: <span class="variable">variable</span>.<span class="variable">name</span>
    , <span class="variable">val</span>: <span class="variable">variable</span>.<span class="variable">val</span>
      ? <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">variable</span>.<span class="variable">val</span>)
      : <span class="variable">undefined</span>
  };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Color.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitColor</span> = <span class="keyword">function</span>(<span class="variable">color</span>){
  <span class="keyword">return</span> {
      <span class="variable">type</span>: <span class="string">'color'</span>
    , <span class="variable">val</span>: [
        <span class="variable">color</span>.<span class="variable">r</span>
      , <span class="variable">color</span>.<span class="variable">g</span>
      , <span class="variable">color</span>.<span class="variable">b</span>
      , <span class="variable">color</span>.<span class="variable">a</span>
    ]
  };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Unit.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitUnit</span> = <span class="keyword">function</span>(<span class="variable">unit</span>){
  <span class="keyword">return</span> {
      <span class="variable">type</span>: <span class="string">'unit'</span>
    , <span class="variable">unitType</span>: <span class="variable">unit</span>.<span class="variable">type</span>
    , <span class="variable">val</span>: <span class="variable">unit</span>.<span class="variable">val</span>
  };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Selector.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitSelector</span> = <span class="keyword">function</span>(<span class="variable">selector</span>){
  <span class="keyword">return</span> {
      <span class="variable">type</span>: <span class="string">'selector'</span>
    , <span class="variable">val</span>: <span class="variable">selector</span>.<span class="variable">val</span>
    , <span class="variable">block</span>: <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">selector</span>.<span class="variable">block</span>)
  };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit String.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitString</span> = <span class="keyword">function</span>(<span class="variable">string</span>){
  <span class="keyword">return</span> { <span class="variable">type</span>: <span class="string">'string'</span>, <span class="variable">val</span>: <span class="variable">string</span>.<span class="variable">val</span> };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Ident.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitIdent</span> = <span class="keyword">function</span>(<span class="variable">id</span>){
  <span class="keyword">return</span> { <span class="variable">type</span>: <span class="string">'ident'</span>, <span class="variable">val</span>: <span class="variable">id</span>.<span class="variable">val</span> };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Null.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitNull</span> = <span class="keyword">function</span>(<span class="variable">node</span>){
  <span class="keyword">return</span> <span class="keyword">null</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Boolean.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitBoolean</span> = <span class="keyword">function</span>(<span class="variable">bool</span>){
  <span class="keyword">return</span> <span class="variable">bool</span>.<span class="variable">val</span>;
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit BinOp.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitBinOp</span> = <span class="keyword">function</span>(<span class="variable">binop</span>){
  <span class="keyword">return</span> {
      <span class="variable">type</span>: <span class="string">'binop'</span>
    , <span class="variable">op</span>: <span class="variable">binop</span>.<span class="variable">type</span>
    , <span class="variable">left</span>: <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">binop</span>.<span class="variable">left</span>)
    , <span class="variable">right</span>: <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">binop</span>.<span class="variable">right</span>)
  };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Call.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitCall</span> = <span class="keyword">function</span>(<span class="variable">call</span>){
  <span class="keyword">return</span> {
      <span class="variable">type</span>: <span class="string">'call'</span>
    , <span class="variable">name</span>: <span class="variable">call</span>.<span class="variable">name</span>
    , <span class="variable">args</span>: <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">call</span>.<span class="variable">args</span>)
  };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Params.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitParams</span> = <span class="keyword">function</span>(<span class="variable">params</span>){
  <span class="keyword">return</span> <span class="variable">params</span>.<span class="variable">nodes</span>.<span class="variable">map</span>(<span class="keyword">function</span>(<span class="variable">node</span>){
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">node</span>);
  }, <span class="this">this</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Function.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitFunction</span> = <span class="keyword">function</span>(<span class="variable">fn</span>){
  <span class="keyword">return</span> {
      <span class="variable">type</span>: <span class="string">'function'</span>
    , <span class="variable">params</span>: <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">fn</span>.<span class="variable">params</span>)
    , <span class="variable">body</span>: <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">fn</span>.<span class="variable">block</span>)
  };
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Expression.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitExpression</span> = <span class="keyword">function</span>(<span class="variable">expr</span>){
  <span class="keyword">return</span> <span class="variable">expr</span>.<span class="variable">nodes</span>.<span class="variable">map</span>(<span class="keyword">function</span>(<span class="variable">node</span>){
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">node</span>);
  }, <span class="this">this</span>);
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Visit Property.
 </p>
</td>
<td class="code">
<pre><code><span class="class">Serializer</span>.<span class="variable">prototype</span>.<span class="variable">visitProperty</span> = <span class="keyword">function</span>(<span class="variable">prop</span>){
  <span class="keyword">return</span> {
      <span class="variable">type</span>: <span class="string">'property'</span>
    , <span class="variable">name</span>: <span class="variable">prop</span>.<span class="variable">name</span>
    , <span class="variable">expr</span>: <span class="this">this</span>.<span class="variable">visit</span>(<span class="variable">prop</span>.<span class="variable">expr</span>)
  };
};
</code></pre>
</td>
</tr>	</body>
</html></tbody></table>